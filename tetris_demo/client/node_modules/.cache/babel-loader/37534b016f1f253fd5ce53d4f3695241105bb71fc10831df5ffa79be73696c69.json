{"ast":null,"code":"var _jsxFileName = \"/Users/driesrooryck/Desktop/s25/distributed-systems/tetris/client/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport io from 'socket.io-client';\n\n// Connect to the WebSocket server\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:3001');\n\n// Map of tetromino values to colors\nconst COLORS = {\n  1: 'cyan',\n  // I\n  2: 'blue',\n  // J\n  3: 'orange',\n  // L\n  4: 'yellow',\n  // O\n  5: 'green',\n  // S\n  6: 'purple',\n  // T\n  7: 'red' // Z\n};\n\n// ----- GAME BOARD COMPONENT -----\nconst GameBoard = ({\n  board,\n  players,\n  currentPlayerId\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const cellSize = 30; // each cell is 30px\n\n  // Calculate canvas dimensions based on board size\n  const canvasWidth = board[0] ? board[0].length * cellSize : 300;\n  const canvasHeight = board.length * cellSize || 600;\n\n  // Update the useEffect with additional null checks:\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n\n    // Clear the canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw a dark background\n    ctx.fillStyle = '#111';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // CRITICAL: Add safety check for board and board structure\n    if (!board || !Array.isArray(board) || board.length === 0 || !Array.isArray(board[0])) {\n      console.warn(\"Invalid board structure:\", board);\n      return;\n    }\n\n    // Draw the grid\n    ctx.strokeStyle = '#333';\n    ctx.lineWidth = 0.5;\n\n    // Draw grid lines\n    for (let r = 0; r <= board.length; r++) {\n      ctx.beginPath();\n      ctx.moveTo(0, r * cellSize);\n      ctx.lineTo(canvas.width, r * cellSize);\n      ctx.stroke();\n    }\n    for (let c = 0; c <= board[0].length; c++) {\n      ctx.beginPath();\n      ctx.moveTo(c * cellSize, 0);\n      ctx.lineTo(c * cellSize, canvas.height);\n      ctx.stroke();\n    }\n\n    // Draw placed pieces on the board\n    for (let r = 0; r < board.length; r++) {\n      // Safety check for board row\n      if (!Array.isArray(board[r])) {\n        console.warn(`Invalid board row at index ${r}:`, board[r]);\n        continue;\n      }\n      for (let c = 0; c < board[r].length; c++) {\n        const cell = board[r][c];\n        if (cell !== 0) {\n          // If the cell has a complex structure (from server)\n          if (typeof cell === 'object' && cell !== null) {\n            const playerId = cell.playerId;\n            // Safety check for players\n            if (!players) {\n              ctx.fillStyle = 'gray';\n            } else {\n              const player = Object.values(players).find(p => p && p.id === (playerId === null || playerId === void 0 ? void 0 : playerId.substring(0, 4)));\n              ctx.fillStyle = player ? player.color : 'gray';\n            }\n          } else {\n            // If it's just a number (simple case)\n            ctx.fillStyle = COLORS[cell] || 'gray';\n          }\n          ctx.fillRect(c * cellSize, r * cellSize, cellSize, cellSize);\n          ctx.strokeStyle = '#FFF';\n          ctx.lineWidth = 1;\n          ctx.strokeRect(c * cellSize, r * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    // Draw line clear animation if active\n    if (board.linesToClear && Array.isArray(board.linesToClear) && board.linesToClear.length > 0) {\n      board.linesToClear.forEach(rowIndex => {\n        // Flash or highlight the rows being cleared\n        const flash = Math.floor(Date.now() / 100) % 2 === 0;\n        ctx.fillStyle = flash ? '#FFFFFF' : '#888888';\n        ctx.fillRect(0, rowIndex * cellSize, canvas.width, cellSize);\n      });\n    }\n\n    // Draw active tetromino for each player\n    if (players && typeof players === 'object') {\n      Object.values(players).forEach(player => {\n        // Safety check for player and currentPiece\n        if (!player || !player.currentPiece || !player.currentPiece.shape) return;\n        const {\n          x,\n          y,\n          currentPiece,\n          color\n        } = player;\n        const shape = currentPiece.shape;\n\n        // Safety check for shape\n        if (!Array.isArray(shape)) {\n          console.warn(\"Invalid shape:\", shape);\n          return;\n        }\n        for (let r = 0; r < shape.length; r++) {\n          // Safety check for shape row\n          if (!Array.isArray(shape[r])) {\n            console.warn(`Invalid shape row at index ${r}:`, shape[r]);\n            continue;\n          }\n          for (let c = 0; c < shape[r].length; c++) {\n            if (shape[r][c] !== 0) {\n              const boardX = x + c;\n              const boardY = y + r;\n\n              // Skip if out of bounds or above the board\n              if (boardX < 0 || boardX >= board[0].length || boardY < 0 || boardY >= board.length) {\n                continue;\n              }\n              ctx.fillStyle = color || currentPiece.color || 'gray';\n              ctx.fillRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n              ctx.strokeStyle = '#FFF';\n              ctx.lineWidth = 1;\n              ctx.strokeRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n            }\n          }\n        }\n      });\n    }\n  }, [board, players, currentPlayerId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: canvasWidth,\n      height: canvasHeight,\n      style: {\n        border: '2px solid #555'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- PLAYER LIST COMPONENT -----\n_s(GameBoard, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n_c = GameBoard;\nconst PlayerList = ({\n  players,\n  currentPlayerId\n}) => {\n  const currentPlayerShortId = currentPlayerId === null || currentPlayerId === void 0 ? void 0 : currentPlayerId.substring(0, 4);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginBottom: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '10px'\n      },\n      children: \"Players\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '10px',\n        maxWidth: '250px'\n      },\n      children: Object.values(players).map(player => {\n        const isCurrentPlayer = player.id === currentPlayerShortId;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            padding: '8px',\n            backgroundColor: '#333',\n            borderRadius: '4px',\n            borderLeft: `4px solid ${player.color}`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '15px',\n              height: '15px',\n              backgroundColor: player.color,\n              marginRight: '10px',\n              borderRadius: '3px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [\"Player \", player.playerNumber, isCurrentPlayer && ' (You)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: 'auto',\n              fontWeight: 'bold',\n              fontSize: '14px',\n              color: '#AAA'\n            },\n            children: player.score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)]\n        }, player.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- SCOREBOARD COMPONENT -----\n_c2 = PlayerList;\nconst ScoreBoard = ({\n  players\n}) => {\n  // Sort players by score in descending order\n  const sortedPlayers = [...Object.values(players)].sort((a, b) => b.score - a.score);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '10px'\n      },\n      children: \"Scores\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#222',\n        padding: '10px',\n        borderRadius: '4px',\n        maxWidth: '250px'\n      },\n      children: sortedPlayers.map(player => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          padding: '5px 0',\n          borderBottom: '1px solid #444'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '10px',\n              height: '10px',\n              backgroundColor: player.color,\n              marginRight: '8px',\n              borderRadius: '2px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Player \", player.playerNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: player.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)]\n      }, player.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- HOME SCREEN COMPONENT -----\n_c3 = ScoreBoard;\nconst HomeScreen = ({\n  players,\n  currentPlayerId,\n  readyPlayers,\n  onReady,\n  onStartGame,\n  onSetGameMode,\n  gameMode,\n  gameInProgress,\n  isRejoining\n}) => {\n  const currentPlayerShortId = currentPlayerId ? currentPlayerId.substring(0, 4) : null;\n  const currentPlayer = currentPlayerShortId ? Object.values(players).find(p => p.id === currentPlayerShortId) : null;\n  const isPlayerOne = currentPlayer && currentPlayer.playerNumber === 1;\n  const gameModes = [{\n    id: 'classic',\n    name: 'Classic Mode',\n    disabled: false\n  }, {\n    id: 'battle',\n    name: 'Battle Mode',\n    disabled: true\n  }, {\n    id: 'cooperative',\n    name: 'Co-op Mode',\n    disabled: true\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center',\n      maxWidth: '800px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Tetristributed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), gameInProgress && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#552233',\n        padding: '10px',\n        borderRadius: '5px',\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game In Progress\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"A game is currently in progress. Please wait for it to finish.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom: '40px',\n        flexWrap: 'wrap',\n        gap: '20px'\n      },\n      children: [1, 2, 3, 4].map(num => {\n        const player = Object.values(players).find(p => p.playerNumber === num);\n        const isReady = player && readyPlayers.some(id => players[id] && players[id].id === player.id);\n        const isCurrentPlayer = player && currentPlayerShortId && player.id === currentPlayerShortId;\n        const isPlayerRejoining = isCurrentPlayer && player.isRejoining;\n        const bgColor = !player ? '#222' : '#444';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '150px',\n            height: '100px',\n            border: '2px solid #555',\n            borderRadius: '8px',\n            padding: '10px',\n            backgroundColor: bgColor,\n            position: 'relative',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 'bold',\n              marginBottom: '5px'\n            },\n            children: [\"Player \", num, isCurrentPlayer && ' (You)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [player && isReady && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '20px',\n                height: '20px',\n                backgroundColor: player.color,\n                margin: '0 auto'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this), isPlayerRejoining && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: '0',\n                left: '0',\n                right: '0',\n                padding: '2px',\n                backgroundColor: '#33AA33',\n                color: 'white',\n                fontSize: '12px',\n                borderTopLeftRadius: '6px',\n                borderTopRightRadius: '6px'\n              },\n              children: \"Welcome Back!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 19\n            }, this), !player && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Waiting for player...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 29\n            }, this), player && !isReady && !isCurrentPlayer && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                color: '#888'\n              },\n              children: \"Not Ready\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), isCurrentPlayer && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onReady(!isReady),\n              style: {\n                backgroundColor: isReady ? '#333' : '#FF3333',\n                border: 'none',\n                color: 'white',\n                padding: '5px 10px',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                width: '100%'\n              },\n              children: isReady ? 'Cancel' : isPlayerRejoining ? 'Rejoin Game' : 'Press X'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 17\n          }, this)]\n        }, num, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this), isPlayerOne && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          gap: '15px'\n        },\n        children: gameModes.map(mode => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => !mode.disabled && onSetGameMode(mode.id),\n          style: {\n            padding: '10px 15px',\n            backgroundColor: gameMode === mode.id ? '#FF5733' : '#444',\n            border: 'none',\n            borderRadius: '4px',\n            color: 'white',\n            opacity: mode.disabled ? 0.5 : 1,\n            cursor: mode.disabled ? 'not-allowed' : 'pointer'\n          },\n          disabled: mode.disabled,\n          children: [mode.name, mode.disabled && ' (Coming Soon)']\n        }, mode.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 9\n    }, this), isPlayerOne && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onStartGame,\n      style: {\n        padding: '12px 30px',\n        backgroundColor: readyPlayers.length > 0 ? '#33FF57' : '#555',\n        border: 'none',\n        borderRadius: '4px',\n        color: 'white',\n        fontSize: '18px',\n        cursor: readyPlayers.length > 0 ? 'pointer' : 'not-allowed'\n      },\n      disabled: readyPlayers.length === 0,\n      children: \"Start Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 9\n    }, this), !isPlayerOne && readyPlayers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        fontSize: '18px'\n      },\n      children: \"Waiting for Player 1 to start the game...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Controls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2190 \\u2192 : Move left/right | \\u2191 or Z : Rotate | \\u2193 : Soft drop | Space : Hard drop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- GAME OVER SCREEN COMPONENT -----\n_c4 = HomeScreen;\nconst GameOverScreen = ({\n  gameOverData,\n  onTimeout\n}) => {\n  _s2();\n  const [countdown, setCountdown] = useState(5);\n  useEffect(() => {\n    // Start countdown\n    const timer = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          onTimeout();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [onTimeout]);\n\n  // Format the player ID to be more readable\n  const playerShortId = gameOverData.playerId ? gameOverData.playerId.substring(0, 4) : 'Unknown';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      zIndex: 1000\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#333',\n        padding: '30px',\n        borderRadius: '10px',\n        boxShadow: '0 0 20px rgba(255, 0, 0, 0.5)',\n        textAlign: 'center',\n        color: 'white',\n        maxWidth: '400px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: '0 0 20px',\n          fontSize: '28px',\n          color: '#FF5733'\n        },\n        children: \"Game Over\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '18px',\n          marginBottom: '15px'\n        },\n        children: [\"Player \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold',\n            color: '#FF5733'\n          },\n          children: playerShortId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 18\n        }, this), \" lost!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '24px',\n          margin: '20px 0'\n        },\n        children: [\"Final Score: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: gameOverData.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '16px',\n          marginTop: '25px',\n          color: '#AAA'\n        },\n        children: [\"Returning to lobby in \", countdown, \" seconds...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 483,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- MAIN APP COMPONENT -----\n_s2(GameOverScreen, \"5IyNxS0sv4AHO/4kY6tmyq4YYJY=\");\n_c5 = GameOverScreen;\nfunction App() {\n  _s3();\n  var _gameState$players$so;\n  const [gameState, setGameState] = useState(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [gameOverData, setGameOverData] = useState(null);\n\n  // Handle socket events\n  useEffect(() => {\n    socket.on('connect', () => {\n      console.log('Connected to server');\n    });\n    socket.on('init', initialState => {\n      console.log('Received initial game state:', initialState);\n      setGameState(initialState);\n    });\n    socket.on('gameState', newState => {\n      // If we're showing gameInProgress screen, only update if returning to lobby\n      if (gameState !== null && gameState !== void 0 && gameState.gameInProgress && !gameState.players[socket.id] && newState.appPhase === 'playing') {\n        // Don't update state - keep showing \"Game in Progress\" screen\n        return;\n      }\n\n      // Otherwise update normally\n      setGameState(newState);\n    });\n    socket.on('gameOver', data => {\n      console.log('Game over with data:', data);\n      setIsGameOver(true);\n      setGameOverData(data);\n    });\n    return () => {\n      socket.off('connect');\n      socket.off('init');\n      socket.off('gameState');\n      socket.off('gameOver');\n    };\n  }, []);\n\n  // Keyboard control handlers\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', {\n              type: 'moveLeft'\n            });\n            socket.emit('playerAction', {\n              type: 'startDAS',\n              direction: 'left'\n            });\n            break;\n          case 'ArrowRight':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', {\n              type: 'moveRight'\n            });\n            socket.emit('playerAction', {\n              type: 'startDAS',\n              direction: 'right'\n            });\n            break;\n          case 'ArrowUp':\n          case 'KeyZ':\n            socket.emit('playerAction', {\n              type: 'rotate'\n            });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', {\n              type: 'softDrop'\n            });\n            break;\n          case 'Space':\n            socket.emit('playerAction', {\n              type: 'hardDrop'\n            });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    const handleKeyUp = e => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            socket.emit('playerAction', {\n              type: 'endDAS'\n            });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', {\n              type: 'endSoftDrop'\n            });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [gameState]);\n\n  // Handle player ready state\n  const handlePlayerReady = useCallback(isReady => {\n    socket.emit('playerReady', isReady);\n  }, []);\n\n  // Handle game start\n  const handleStartGame = useCallback(() => {\n    socket.emit('startGame');\n  }, []);\n\n  // Handle game mode change\n  const handleSetGameMode = useCallback(mode => {\n    socket.emit('setGameMode', mode);\n  }, []);\n\n  // Handle game over timeout\n  const handleGameOverTimeout = useCallback(() => {\n    setIsGameOver(false);\n    setGameOverData(null);\n  }, []);\n\n  // Show loading screen if no game state\n  if (!gameState) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Connecting to server...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Home screen or game screen based on app phase\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [gameState.appPhase === 'homescreen' && /*#__PURE__*/_jsxDEV(HomeScreen, {\n      players: gameState.players,\n      currentPlayerId: socket.id,\n      readyPlayers: gameState.readyPlayers,\n      onReady: handlePlayerReady,\n      onStartGame: handleStartGame,\n      onSetGameMode: handleSetGameMode,\n      gameMode: gameState.gameMode,\n      gameInProgress: gameState.gameInProgress,\n      isRejoining: (_gameState$players$so = gameState.players[socket.id]) === null || _gameState$players$so === void 0 ? void 0 : _gameState$players$so.isRejoining\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 9\n    }, this), gameState.appPhase === 'playing' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Tetristributed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Connected as player: \", socket.id && socket.id.substring(0, 4)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '20px',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(GameBoard, {\n          board: gameState.board,\n          players: gameState.players,\n          currentPlayerId: socket.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(PlayerList, {\n            players: gameState.players,\n            currentPlayerId: socket.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ScoreBoard, {\n            players: gameState.players\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), isGameOver && gameOverData && /*#__PURE__*/_jsxDEV(GameOverScreen, {\n      gameOverData: gameOverData,\n      onTimeout: handleGameOverTimeout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 651,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"F+J5CdKKlfklcgEskksfjnnHQqc=\");\n_c6 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"GameBoard\");\n$RefreshReg$(_c2, \"PlayerList\");\n$RefreshReg$(_c3, \"ScoreBoard\");\n$RefreshReg$(_c4, \"HomeScreen\");\n$RefreshReg$(_c5, \"GameOverScreen\");\n$RefreshReg$(_c6, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","io","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","COLORS","GameBoard","board","players","currentPlayerId","_s","canvasRef","cellSize","canvasWidth","length","canvasHeight","canvas","current","ctx","getContext","clearRect","width","height","fillStyle","fillRect","Array","isArray","console","warn","strokeStyle","lineWidth","r","beginPath","moveTo","lineTo","stroke","c","cell","playerId","player","Object","values","find","p","id","substring","color","strokeRect","linesToClear","forEach","rowIndex","flash","Math","floor","Date","now","currentPiece","shape","x","y","boardX","boardY","children","ref","style","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","PlayerList","currentPlayerShortId","marginBottom","display","flexDirection","gap","maxWidth","map","isCurrentPlayer","alignItems","padding","backgroundColor","borderRadius","borderLeft","marginRight","flex","playerNumber","marginLeft","fontWeight","fontSize","score","_c2","ScoreBoard","sortedPlayers","sort","a","b","justifyContent","borderBottom","_c3","HomeScreen","readyPlayers","onReady","onStartGame","onSetGameMode","gameMode","gameInProgress","isRejoining","currentPlayer","isPlayerOne","gameModes","name","disabled","textAlign","margin","flexWrap","num","isReady","some","isPlayerRejoining","bgColor","position","top","left","right","borderTopLeftRadius","borderTopRightRadius","marginTop","onClick","cursor","mode","opacity","_c4","GameOverScreen","gameOverData","onTimeout","_s2","countdown","setCountdown","timer","setInterval","prev","clearInterval","playerShortId","bottom","zIndex","boxShadow","_c5","App","_s3","_gameState$players$so","gameState","setGameState","isGameOver","setIsGameOver","setGameOverData","on","log","initialState","newState","appPhase","data","off","handleKeyDown","e","code","emit","type","direction","handleKeyUp","window","addEventListener","removeEventListener","handlePlayerReady","handleStartGame","handleSetGameMode","handleGameOverTimeout","className","_c6","$RefreshReg$"],"sources":["/Users/driesrooryck/Desktop/s25/distributed-systems/tetris/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport io from 'socket.io-client';\n\n// Connect to the WebSocket server\nconst socket = io('http://localhost:3001');\n\n// Map of tetromino values to colors\nconst COLORS = {\n  1: 'cyan',    // I\n  2: 'blue',    // J\n  3: 'orange',  // L\n  4: 'yellow',  // O\n  5: 'green',   // S\n  6: 'purple',  // T\n  7: 'red'      // Z\n};\n\n// ----- GAME BOARD COMPONENT -----\nconst GameBoard = ({ board, players, currentPlayerId }) => {\n  const canvasRef = useRef(null);\n  const cellSize = 30; // each cell is 30px\n  \n  // Calculate canvas dimensions based on board size\n  const canvasWidth = board[0] ? board[0].length * cellSize : 300;\n  const canvasHeight = board.length * cellSize || 600;\n\n// Update the useEffect with additional null checks:\n\nuseEffect(() => {\n  const canvas = canvasRef.current;\n  if (!canvas) return;\n  \n  const ctx = canvas.getContext('2d');\n  \n  // Clear the canvas\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  \n  // Draw a dark background\n  ctx.fillStyle = '#111';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  \n  // CRITICAL: Add safety check for board and board structure\n  if (!board || !Array.isArray(board) || board.length === 0 || !Array.isArray(board[0])) {\n    console.warn(\"Invalid board structure:\", board);\n    return;\n  }\n  \n  // Draw the grid\n  ctx.strokeStyle = '#333';\n  ctx.lineWidth = 0.5;\n  \n  // Draw grid lines\n  for (let r = 0; r <= board.length; r++) {\n    ctx.beginPath();\n    ctx.moveTo(0, r * cellSize);\n    ctx.lineTo(canvas.width, r * cellSize);\n    ctx.stroke();\n  }\n  \n  for (let c = 0; c <= board[0].length; c++) {\n    ctx.beginPath();\n    ctx.moveTo(c * cellSize, 0);\n    ctx.lineTo(c * cellSize, canvas.height);\n    ctx.stroke();\n  }\n  \n  // Draw placed pieces on the board\n  for (let r = 0; r < board.length; r++) {\n    // Safety check for board row\n    if (!Array.isArray(board[r])) {\n      console.warn(`Invalid board row at index ${r}:`, board[r]);\n      continue;\n    }\n    \n    for (let c = 0; c < board[r].length; c++) {\n      const cell = board[r][c];\n      if (cell !== 0) {\n        // If the cell has a complex structure (from server)\n        if (typeof cell === 'object' && cell !== null) {\n          const playerId = cell.playerId;\n          // Safety check for players\n          if (!players) {\n            ctx.fillStyle = 'gray';\n          } else {\n            const player = Object.values(players).find(p => p && p.id === playerId?.substring(0, 4));\n            ctx.fillStyle = player ? player.color : 'gray';\n          }\n        } else {\n          // If it's just a number (simple case)\n          ctx.fillStyle = COLORS[cell] || 'gray';\n        }\n        \n        ctx.fillRect(c * cellSize, r * cellSize, cellSize, cellSize);\n        ctx.strokeStyle = '#FFF';\n        ctx.lineWidth = 1;\n        ctx.strokeRect(c * cellSize, r * cellSize, cellSize, cellSize);\n      }\n    }\n  }\n\n  // Draw line clear animation if active\n  if (board.linesToClear && Array.isArray(board.linesToClear) && board.linesToClear.length > 0) {\n    board.linesToClear.forEach(rowIndex => {\n      // Flash or highlight the rows being cleared\n      const flash = Math.floor(Date.now() / 100) % 2 === 0;\n      ctx.fillStyle = flash ? '#FFFFFF' : '#888888';\n      ctx.fillRect(0, rowIndex * cellSize, canvas.width, cellSize);\n    });\n  }\n      \n  // Draw active tetromino for each player\n  if (players && typeof players === 'object') {\n    Object.values(players).forEach(player => {\n      // Safety check for player and currentPiece\n      if (!player || !player.currentPiece || !player.currentPiece.shape) return;\n      \n      const { x, y, currentPiece, color } = player;\n      const shape = currentPiece.shape;\n      \n      // Safety check for shape\n      if (!Array.isArray(shape)) {\n        console.warn(\"Invalid shape:\", shape);\n        return;\n      }\n      \n      for (let r = 0; r < shape.length; r++) {\n        // Safety check for shape row\n        if (!Array.isArray(shape[r])) {\n          console.warn(`Invalid shape row at index ${r}:`, shape[r]);\n          continue;\n        }\n        \n        for (let c = 0; c < shape[r].length; c++) {\n          if (shape[r][c] !== 0) {\n            const boardX = x + c;\n            const boardY = y + r;\n            \n            // Skip if out of bounds or above the board\n            if (boardX < 0 || boardX >= board[0].length || \n                boardY < 0 || boardY >= board.length) {\n              continue;\n            }\n            \n            ctx.fillStyle = color || currentPiece.color || 'gray';\n            ctx.fillRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n            ctx.strokeStyle = '#FFF';\n            ctx.lineWidth = 1;\n            ctx.strokeRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n          }\n        }\n      }\n    });\n  }\n    \n}, [board, players, currentPlayerId]);\n\n  return (\n    <div>\n      <canvas\n        ref={canvasRef}\n        width={canvasWidth}\n        height={canvasHeight}\n        style={{ border: '2px solid #555' }}\n      />\n    </div>\n  );\n};\n\n// ----- PLAYER LIST COMPONENT -----\nconst PlayerList = ({ players, currentPlayerId }) => {\n  const currentPlayerShortId = currentPlayerId?.substring(0, 4);\n  \n  return (\n    <div style={{ marginBottom: '20px' }}>\n      <h3 style={{ marginBottom: '10px' }}>Players</h3>\n      \n      <div style={{ \n        display: 'flex', \n        flexDirection: 'column',\n        gap: '10px',\n        maxWidth: '250px'\n      }}>\n        {Object.values(players).map(player => {\n          const isCurrentPlayer = player.id === currentPlayerShortId;\n          \n          return (\n            <div \n              key={player.id}\n              style={{ \n                display: 'flex',\n                alignItems: 'center',\n                padding: '8px',\n                backgroundColor: '#333',\n                borderRadius: '4px',\n                borderLeft: `4px solid ${player.color}`,\n              }}\n            >\n              <div \n                style={{ \n                  width: '15px', \n                  height: '15px', \n                  backgroundColor: player.color,\n                  marginRight: '10px',\n                  borderRadius: '3px'\n                }}\n              />\n              \n              <div style={{ flex: 1 }}>\n                Player {player.playerNumber}\n                {isCurrentPlayer && ' (You)'}\n              </div>\n              \n              <div style={{ \n                marginLeft: 'auto', \n                fontWeight: 'bold', \n                fontSize: '14px',\n                color: '#AAA'\n              }}>\n                {player.score}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n// ----- SCOREBOARD COMPONENT -----\nconst ScoreBoard = ({ players }) => {\n  // Sort players by score in descending order\n  const sortedPlayers = [...Object.values(players)].sort((a, b) => b.score - a.score);\n  \n  return (\n    <div>\n      <h3 style={{ marginBottom: '10px' }}>Scores</h3>\n      \n      <div style={{\n        backgroundColor: '#222',\n        padding: '10px',\n        borderRadius: '4px',\n        maxWidth: '250px'\n      }}>\n        {sortedPlayers.map(player => (\n          <div \n            key={player.id}\n            style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              padding: '5px 0',\n              borderBottom: '1px solid #444'\n            }}\n          >\n            <div style={{ display: 'flex', alignItems: 'center' }}>\n              <div \n                style={{ \n                  width: '10px', \n                  height: '10px', \n                  backgroundColor: player.color,\n                  marginRight: '8px',\n                  borderRadius: '2px'\n                }}\n              />\n              <span>Player {player.playerNumber}</span>\n            </div>\n            <div style={{ fontWeight: 'bold' }}>{player.score}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// ----- HOME SCREEN COMPONENT -----\nconst HomeScreen = ({ \n  players, \n  currentPlayerId, \n  readyPlayers, \n  onReady, \n  onStartGame, \n  onSetGameMode, \n  gameMode,\n  gameInProgress,\n  isRejoining\n}) => {\n  const currentPlayerShortId = currentPlayerId ? currentPlayerId.substring(0, 4) : null;\n  const currentPlayer = currentPlayerShortId ? Object.values(players).find(p => p.id === currentPlayerShortId) : null;\n  const isPlayerOne = currentPlayer && currentPlayer.playerNumber === 1;\n  \n  const gameModes = [\n    { id: 'classic', name: 'Classic Mode', disabled: false },\n    { id: 'battle', name: 'Battle Mode', disabled: true },\n    { id: 'cooperative', name: 'Co-op Mode', disabled: true }\n  ];\n  \n  return (\n    <div style={{ textAlign: 'center', maxWidth: '800px', margin: '0 auto' }}>\n      <h1>Tetristributed</h1>\n      \n      {gameInProgress && (\n        <div style={{\n          backgroundColor: '#552233',\n          padding: '10px',\n          borderRadius: '5px',\n          marginBottom: '20px'\n        }}>\n          <h2>Game In Progress</h2>\n          <p>A game is currently in progress. Please wait for it to finish.</p>\n        </div>\n      )}\n      \n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        marginBottom: '40px',\n        flexWrap: 'wrap',\n        gap: '20px'\n      }}>\n        {[1, 2, 3, 4].map(num => {\n          const player = Object.values(players).find(p => p.playerNumber === num);\n          const isReady = player && readyPlayers.some(id => players[id] && players[id].id === player.id);\n          const isCurrentPlayer = player && currentPlayerShortId && player.id === currentPlayerShortId;\n          const isPlayerRejoining = isCurrentPlayer && player.isRejoining;\n          const bgColor = !player ? '#222' : '#444';\n          \n          return (\n            <div key={num} style={{\n              width: '150px',\n              height: '100px',\n              border: '2px solid #555',\n              borderRadius: '8px',\n              padding: '10px',\n              backgroundColor: bgColor,\n              position: 'relative',\n              display: 'flex',\n              flexDirection: 'column'\n            }}>\n              <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\n                Player {num}\n                {isCurrentPlayer && ' (You)'}\n              </div>\n              \n              <div style={{ flex: 1 }}>\n                {player && isReady && (\n                  <div style={{\n                    width: '20px',\n                    height: '20px',\n                    backgroundColor: player.color,\n                    margin: '0 auto'\n                  }}></div>\n                )}\n                \n                {isPlayerRejoining && (\n                  <div style={{\n                    position: 'absolute',\n                    top: '0',\n                    left: '0',\n                    right: '0',\n                    padding: '2px',\n                    backgroundColor: '#33AA33',\n                    color: 'white',\n                    fontSize: '12px',\n                    borderTopLeftRadius: '6px',\n                    borderTopRightRadius: '6px'\n                  }}>\n                    Welcome Back!\n                  </div>\n                )}\n                \n                {!player && <div>Waiting for player...</div>}\n                \n                {player && !isReady && !isCurrentPlayer && (\n                  <div style={{ fontSize: '14px', color: '#888' }}>Not Ready</div>\n                )}\n              </div>\n              \n              {isCurrentPlayer && (\n                <div style={{ marginTop: 'auto' }}>\n                  <button \n                    onClick={() => onReady(!isReady)}\n                    style={{\n                      backgroundColor: isReady ? '#333' : '#FF3333',\n                      border: 'none',\n                      color: 'white',\n                      padding: '5px 10px',\n                      borderRadius: '4px',\n                      cursor: 'pointer',\n                      width: '100%'\n                    }}\n                  >\n                    {isReady ? 'Cancel' : isPlayerRejoining ? 'Rejoin Game' : 'Press X'}\n                  </button>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n      \n      {isPlayerOne && (\n        <div style={{ marginBottom: '30px' }}>\n          <h2>Game Mode</h2>\n          <div style={{ display: 'flex', justifyContent: 'center', gap: '15px' }}>\n            {gameModes.map(mode => (\n              <button\n                key={mode.id}\n                onClick={() => !mode.disabled && onSetGameMode(mode.id)}\n                style={{\n                  padding: '10px 15px',\n                  backgroundColor: gameMode === mode.id ? '#FF5733' : '#444',\n                  border: 'none',\n                  borderRadius: '4px',\n                  color: 'white',\n                  opacity: mode.disabled ? 0.5 : 1,\n                  cursor: mode.disabled ? 'not-allowed' : 'pointer'\n                }}\n                disabled={mode.disabled}\n              >\n                {mode.name}\n                {mode.disabled && ' (Coming Soon)'}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n      \n      {isPlayerOne && (\n        <button\n          onClick={onStartGame}\n          style={{\n            padding: '12px 30px',\n            backgroundColor: readyPlayers.length > 0 ? '#33FF57' : '#555',\n            border: 'none',\n            borderRadius: '4px',\n            color: 'white',\n            fontSize: '18px',\n            cursor: readyPlayers.length > 0 ? 'pointer' : 'not-allowed'\n          }}\n          disabled={readyPlayers.length === 0}\n        >\n          Start Game\n        </button>\n      )}\n      \n      {!isPlayerOne && readyPlayers.length > 0 && (\n        <div style={{ marginTop: '20px', fontSize: '18px' }}>\n          Waiting for Player 1 to start the game...\n        </div>\n      )}\n      \n      <div style={{ marginTop: '40px' }}>\n        <h3>Controls</h3>\n        <p>← → : Move left/right | ↑ or Z : Rotate | ↓ : Soft drop | Space : Hard drop</p>\n      </div>\n    </div>\n  );\n};\n\n// ----- GAME OVER SCREEN COMPONENT -----\nconst GameOverScreen = ({ gameOverData, onTimeout }) => {\n  const [countdown, setCountdown] = useState(5);\n  \n  useEffect(() => {\n    // Start countdown\n    const timer = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          onTimeout();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    \n    return () => clearInterval(timer);\n  }, [onTimeout]);\n  \n  // Format the player ID to be more readable\n  const playerShortId = gameOverData.playerId ? gameOverData.playerId.substring(0, 4) : 'Unknown';\n  \n  return (\n    <div style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      zIndex: 1000\n    }}>\n      <div style={{\n        backgroundColor: '#333',\n        padding: '30px',\n        borderRadius: '10px',\n        boxShadow: '0 0 20px rgba(255, 0, 0, 0.5)',\n        textAlign: 'center',\n        color: 'white',\n        maxWidth: '400px'\n      }}>\n        <h2 style={{ margin: '0 0 20px', fontSize: '28px', color: '#FF5733' }}>Game Over</h2>\n        \n        <div style={{ fontSize: '18px', marginBottom: '15px' }}>\n          Player <span style={{ fontWeight: 'bold', color: '#FF5733' }}>{playerShortId}</span> lost!\n        </div>\n        \n        <div style={{ fontSize: '24px', margin: '20px 0' }}>\n          Final Score: <span style={{ fontWeight: 'bold' }}>{gameOverData.score}</span>\n        </div>\n        \n        <div style={{ fontSize: '16px', marginTop: '25px', color: '#AAA' }}>\n          Returning to lobby in {countdown} seconds...\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// ----- MAIN APP COMPONENT -----\nfunction App() {\n  const [gameState, setGameState] = useState(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [gameOverData, setGameOverData] = useState(null);\n  \n  // Handle socket events\n  useEffect(() => {\n    socket.on('connect', () => {\n      console.log('Connected to server');\n    });\n\n    socket.on('init', (initialState) => {\n      console.log('Received initial game state:', initialState);\n      setGameState(initialState);\n    });\n\n    socket.on('gameState', (newState) => {\n      // If we're showing gameInProgress screen, only update if returning to lobby\n      if (gameState?.gameInProgress && !gameState.players[socket.id] && \n          newState.appPhase === 'playing') {\n        // Don't update state - keep showing \"Game in Progress\" screen\n        return;\n      }\n      \n      // Otherwise update normally\n      setGameState(newState);\n    });\n\n    socket.on('gameOver', (data) => {\n      console.log('Game over with data:', data);\n      setIsGameOver(true);\n      setGameOverData(data);\n    });\n\n    return () => {\n      socket.off('connect');\n      socket.off('init');\n      socket.off('gameState');\n      socket.off('gameOver');\n    };\n  }, []);\n\n  // Keyboard control handlers\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', { type: 'moveLeft' });\n            socket.emit('playerAction', { type: 'startDAS', direction: 'left' });\n            break;\n          case 'ArrowRight':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', { type: 'moveRight' });\n            socket.emit('playerAction', { type: 'startDAS', direction: 'right' });\n            break;\n          case 'ArrowUp':\n          case 'KeyZ':\n            socket.emit('playerAction', { type: 'rotate' });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', { type: 'softDrop' });\n            break;\n          case 'Space':\n            socket.emit('playerAction', { type: 'hardDrop' });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    const handleKeyUp = (e) => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            socket.emit('playerAction', { type: 'endDAS' });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', { type: 'endSoftDrop' });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [gameState]);\n\n  // Handle player ready state\n  const handlePlayerReady = useCallback((isReady) => {\n    socket.emit('playerReady', isReady);\n  }, []);\n\n  // Handle game start\n  const handleStartGame = useCallback(() => {\n    socket.emit('startGame');\n  }, []);\n\n  // Handle game mode change\n  const handleSetGameMode = useCallback((mode) => {\n    socket.emit('setGameMode', mode);\n  }, []);\n\n  // Handle game over timeout\n  const handleGameOverTimeout = useCallback(() => {\n    setIsGameOver(false);\n    setGameOverData(null);\n  }, []);\n\n  // Show loading screen if no game state\n  if (!gameState) {\n    return <div className=\"App\"><h1>Connecting to server...</h1></div>;\n  }\n\n  // Home screen or game screen based on app phase\n  return (\n    <div className=\"App\">\n      {gameState.appPhase === 'homescreen' && (\n        <HomeScreen\n          players={gameState.players}\n          currentPlayerId={socket.id}\n          readyPlayers={gameState.readyPlayers}\n          onReady={handlePlayerReady}\n          onStartGame={handleStartGame}\n          onSetGameMode={handleSetGameMode}\n          gameMode={gameState.gameMode}\n          gameInProgress={gameState.gameInProgress}\n          isRejoining={gameState.players[socket.id]?.isRejoining}\n        />\n      )}\n      \n      {gameState.appPhase === 'playing' && (\n        <>\n          <h1>Tetristributed</h1>\n          <p>Connected as player: {socket.id && socket.id.substring(0, 4)}</p>\n          <div style={{ display: 'flex', gap: '20px', marginBottom: '20px' }}>\n            <GameBoard \n              board={gameState.board} \n              players={gameState.players}\n              currentPlayerId={socket.id}\n            />\n            <div>\n              <PlayerList players={gameState.players} currentPlayerId={socket.id} />\n              <ScoreBoard players={gameState.players} />\n            </div>\n          </div>\n        </>\n      )}\n      \n      {isGameOver && gameOverData && (\n        <GameOverScreen \n          gameOverData={gameOverData} \n          onTimeout={handleGameOverTimeout} \n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}