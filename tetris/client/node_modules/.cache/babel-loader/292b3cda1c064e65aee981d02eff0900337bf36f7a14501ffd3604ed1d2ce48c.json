{"ast":null,"code":"var _jsxFileName = \"/Users/driesrooryck/Desktop/s25/new_try/distributed-systems/tetris/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback, useRef } from 'react';\nimport BoardStage from './BoardStage';\nimport NewHomeScreen from './NewHomeScreen';\nimport ReadyScreen from './ReadyScreen';\nimport GameOverScreen from './GameOverScreen';\nimport ScorePanel from './ScorePanel';\nimport './App.css';\n\n// Import server connection manager instead of direct socket.io\nimport serverManager from './utils/serverConnection';\nimport { saveGameSession, getGameSession, clearGameSession } from './utils/sessionStorage';\n\n// Background image configuration\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKGROUND_IMAGES = ['deep-tetris-color.jpg', 'tetris-1920-x-1080-background-hyihqau5t3lalo4e.png', 'tetris-2560-x-1600-background-3bjbi7nyulqbller.jpg'];\nconst BACKGROUND_CHANGE_INTERVAL = 30000; // 30 seconds\n\n// Load config file to get server address\nconst loadConfig = async () => {\n  try {\n    const response = await fetch('/config.json');\n    if (!response.ok) {\n      throw new Error(`Failed to load config: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.warn('Error loading config, using default server address:', error);\n    return {\n      client: {\n        serverAddresses: [\"http://localhost:3001\"]\n      }\n    };\n  }\n};\n\n// Add debug logger at the top of the file\nconst DEBUG = {\n  events: true,\n  state: true,\n  render: true\n};\nfunction debugLog(type, message, data) {\n  if (DEBUG[type]) {\n    console.log(`[DEBUG:${type}] ${message}`, data !== undefined ? data : '');\n  }\n}\nfunction App() {\n  _s();\n  var _gameState$players, _gameState$players$so;\n  const [socketId, setSocketId] = useState(null);\n  const [gameState, setGameState] = useState(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [gameOverData, setGameOverData] = useState(null);\n  const [isConnecting, setIsConnecting] = useState(true);\n  const [error, setError] = useState(null);\n  const [socketError, setSocketError] = useState(null);\n  const [serverStatus, setServerStatus] = useState('connecting');\n  const [connectedServer, setConnectedServer] = useState(null);\n\n  // Hard‐drop guard so holding space won't repeat\n  const hardDropActiveRef = useRef(false);\n\n  // Add state for background rotation\n  const [currentBackgroundIndex, setCurrentBackgroundIndex] = useState(0);\n  const backgroundIntervalRef = useRef(null);\n\n  // Add state for timer and scoring\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const [currentScore, setCurrentScore] = useState(0);\n  const [lastScoreChange, setLastScoreChange] = useState(0);\n  const [level, setLevel] = useState(1);\n  const timerIntervalRef = useRef(null);\n\n  // Connect to servers on component mount\n  useEffect(() => {\n    const connectToServers = async () => {\n      try {\n        setIsConnecting(true);\n        setServerStatus('connecting');\n\n        // Initialize server manager\n        await serverManager.initialize(\n        // onConnected callback\n        activeSocket => {\n          debugLog('events', 'Connected to leader server with ID:', activeSocket.id);\n          setSocketId(activeSocket.id);\n          setIsConnecting(false);\n          setServerStatus('connected');\n          setSocketError(null);\n\n          // Instead of using the Socket.IO URI, check if the socket has configuredUrl\n          const serverConfig = serverManager.serverList.find(s => s.port.toString() === activeSocket.io.uri.split(':').pop());\n          if (serverConfig) {\n            setConnectedServer(`${serverConfig.host}:${serverConfig.port}`);\n          } else {\n            // Fallback to the Socket.IO URI\n            const parsedUrl = new URL(activeSocket.io.uri);\n            setConnectedServer(`${parsedUrl.hostname}:${parsedUrl.port}`);\n          }\n\n          // Explicitly request initial state after connection\n          serverManager.emit('requestInitialState');\n        },\n        // onStateChange callback\n        change => {\n          if (change.type === 'connected') {\n            try {\n              // Try to find the server in the server list by URL or port\n              const serverUrl = change.server;\n              const port = serverUrl.split(':').pop();\n              const serverConfig = serverManager.serverList.find(s => s.port.toString() === port);\n              if (serverConfig) {\n                // Use the IP address from the config\n                setConnectedServer(`${serverConfig.host}:${serverConfig.port}`);\n              } else {\n                // Fallback to parsing the URL\n                const configUrl = new URL(change.server);\n                setConnectedServer(`${configUrl.hostname}:${configUrl.port}`);\n              }\n            } catch (e) {\n              setConnectedServer(change.server);\n            }\n          } else if (change.type === 'leaderChanged') {\n            debugLog('events', 'Leader server changed to:', change.server.url);\n            setSocketId(change.server.socket.id);\n\n            // Update server URL info\n            try {\n              const serverUrl = change.server.url;\n              const parsedUrl = new URL(serverUrl);\n              setConnectedServer(`${parsedUrl.hostname}:${parsedUrl.port}`);\n            } catch (e) {\n              setConnectedServer(change.server.url || 'unknown');\n            }\n\n            // Server change notification\n            setServerStatus('switchedServer');\n            setTimeout(() => setServerStatus('connected'), 3000);\n\n            // Re-request initial state after server change\n            serverManager.emit('requestInitialState');\n          } else if (change.type === 'disconnected') {\n            setConnectedServer(null);\n          } else if (change.type === 'allServersDown') {\n            setSocketError('All servers are down. Please try again later.');\n            setServerStatus('disconnected');\n            setConnectedServer(null);\n          }\n        });\n\n        // Set up event handlers\n\n        // Handle initial state\n        serverManager.on('init', initialState => {\n          debugLog('events', 'Received init event with state:', initialState);\n          setGameState(initialState);\n        });\n\n        // Handle room rejoined - when reconnecting to existing session\n        serverManager.on('roomRejoined', data => {\n          var _data$gameState$playe;\n          debugLog('events', 'Received roomRejoined event with data:', data);\n\n          // Save the new session data with updated socket ID\n          saveGameSession({\n            roomCode: data.roomCode,\n            playerName: ((_data$gameState$playe = data.gameState.players[serverManager.getSocketId()]) === null || _data$gameState$playe === void 0 ? void 0 : _data$gameState$playe.name) || 'Player',\n            socketId: serverManager.getSocketId()\n          });\n\n          // Track successful reconnection to avoid fallback attempts\n          serverManager.hasRejoinedRoom = true;\n\n          // Update game state for player\n          setGameState(data.gameState);\n          setError(null);\n        });\n\n        // Handle room creation - save session\n        serverManager.on('roomCreated', data => {\n          var _data$gameState$playe2;\n          debugLog('events', 'Received roomCreated event with data:', data);\n\n          // Save session data for automatic reconnection\n          saveGameSession({\n            roomCode: data.roomCode,\n            playerName: ((_data$gameState$playe2 = data.gameState.players[serverManager.getSocketId()]) === null || _data$gameState$playe2 === void 0 ? void 0 : _data$gameState$playe2.name) || 'Player',\n            socketId: serverManager.getSocketId()\n          });\n          debugLog('state', 'Setting appPhase to readyscreen from:', gameState === null || gameState === void 0 ? void 0 : gameState.appPhase);\n          setGameState(prevState => {\n            const newState = {\n              ...data.gameState,\n              appPhase: 'readyscreen'\n            };\n            debugLog('state', 'New gameState after roomCreated:', newState);\n            return newState;\n          });\n          setError(null);\n        });\n\n        // Handle room join - save session\n        serverManager.on('roomJoined', data => {\n          var _data$gameState$playe3;\n          debugLog('events', 'Received roomJoined event with data:', data);\n\n          // Save session data for automatic reconnection\n          saveGameSession({\n            roomCode: data.roomCode,\n            playerName: ((_data$gameState$playe3 = data.gameState.players[serverManager.getSocketId()]) === null || _data$gameState$playe3 === void 0 ? void 0 : _data$gameState$playe3.name) || 'Player',\n            socketId: serverManager.getSocketId()\n          });\n          setGameState(prevState => {\n            const newState = {\n              ...data.gameState,\n              appPhase: 'readyscreen'\n            };\n            debugLog('state', 'New gameState after roomJoined:', newState);\n            return newState;\n          });\n          setError(null);\n        });\n\n        // Handle leaving room - clear session\n        serverManager.on('roomLeft', data => {\n          debugLog('events', 'Received roomLeft event with data:', data);\n\n          // Clear session data when leaving room\n          clearGameSession();\n\n          // Set app phase to homescreen\n          setGameState({\n            appPhase: 'homescreen',\n            players: {},\n            roomCode: null,\n            activePlayers: [],\n            readyPlayers: []\n          });\n        });\n\n        // Handle game state updates\n        serverManager.on('gameState', newState => {\n          // Improve debug logging to show what we receive\n          debugLog('events', 'Received gameState update with appPhase:', newState === null || newState === void 0 ? void 0 : newState.appPhase);\n          debugLog('events', 'Game state type:', typeof newState);\n\n          // Log when we're receiving the init state\n          if (gameState === null) {\n            console.log('Game state received:', newState);\n            console.log('Current app phase:', gameState === null || gameState === void 0 ? void 0 : gameState.appPhase);\n\n            // If newState is valid, use it\n            if (newState && typeof newState === 'object' && newState.appPhase) {\n              debugLog('state', 'Setting initial game state with appPhase:', newState.appPhase);\n              setGameState(newState);\n            } else {\n              // Create a default homescreen state if the received state is invalid\n              console.warn('Received invalid game state, using default homescreen state');\n              setGameState({\n                appPhase: 'homescreen',\n                socketId: serverManager.getSocketId(),\n                players: {},\n                activePlayers: [],\n                readyPlayers: [],\n                gameInProgress: false\n              });\n            }\n          } else {\n            setGameState(prevState => {\n              // If we're showing a readyscreen from a room we just created or joined,\n              // don't let a gameState event with homescreen override it\n              if ((prevState === null || prevState === void 0 ? void 0 : prevState.appPhase) === 'readyscreen' && (newState === null || newState === void 0 ? void 0 : newState.appPhase) === 'homescreen') {\n                debugLog('state', 'Ignoring homescreen gameState while in readyscreen');\n                return prevState;\n              }\n              debugLog('state', 'Updating gameState from:', prevState === null || prevState === void 0 ? void 0 : prevState.appPhase, 'to:', newState === null || newState === void 0 ? void 0 : newState.appPhase);\n              return newState;\n            });\n          }\n        });\n\n        // Handle errors\n        serverManager.on('error', ({\n          message\n        }) => {\n          debugLog('events', 'Received server error:', message);\n          setError(message);\n        });\n\n        // Handle game over - clear session\n        serverManager.on('gameOver', data => {\n          console.log('Game over with data:', data);\n\n          // Clear session on game over\n          clearGameSession();\n          setIsGameOver(true);\n          setGameOverData(data);\n        });\n\n        // Handle player joined notification\n        serverManager.on('playerJoined', ({\n          playerId,\n          player,\n          gameState\n        }) => {\n          console.log(`Player joined: ${playerId}`);\n          setGameState(gameState);\n        });\n\n        // Handle player left notification\n        serverManager.on('playerLeft', ({\n          playerId,\n          gameState\n        }) => {\n          console.log(`Player left: ${playerId}`);\n          setGameState(gameState);\n        });\n\n        // Handle host assignment (when previous host leaves)\n        serverManager.on('hostAssigned', ({\n          gameState\n        }) => {\n          console.log('You are now the host');\n          setGameState(gameState);\n        });\n      } catch (err) {\n        console.error('Error connecting to servers:', err);\n        setSocketError(`Error connecting to servers: ${err.message}`);\n        setIsConnecting(false);\n        setServerStatus('error');\n      }\n    };\n    connectToServers();\n\n    // Cleanup on component unmount\n    return () => {\n      serverManager.disconnect();\n    };\n  }, []);\n\n  // Background rotation effect - only active during gameplay\n  useEffect(() => {\n    // Clear any existing background rotation interval\n    if (backgroundIntervalRef.current) {\n      clearInterval(backgroundIntervalRef.current);\n      backgroundIntervalRef.current = null;\n    }\n\n    // Start background rotation when game is playing\n    if (gameState && gameState.appPhase === 'playing') {\n      // Randomize starting background\n      setCurrentBackgroundIndex(Math.floor(Math.random() * BACKGROUND_IMAGES.length));\n\n      // Set interval to rotate backgrounds\n      backgroundIntervalRef.current = setInterval(() => {\n        setCurrentBackgroundIndex(prevIndex => (prevIndex + 1) % BACKGROUND_IMAGES.length);\n      }, BACKGROUND_CHANGE_INTERVAL);\n    }\n\n    // Cleanup on unmount or phase change\n    return () => {\n      if (backgroundIntervalRef.current) {\n        clearInterval(backgroundIntervalRef.current);\n        backgroundIntervalRef.current = null;\n      }\n    };\n  }, [gameState === null || gameState === void 0 ? void 0 : gameState.appPhase]);\n\n  // Timer management based on game phase\n  useEffect(() => {\n    // Clean up the previous interval if it exists\n    if (timerIntervalRef.current) {\n      clearInterval(timerIntervalRef.current);\n      timerIntervalRef.current = null;\n    }\n    if (gameState && gameState.appPhase === 'playing') {\n      // Reset the timer when game starts\n      setElapsedTime(0);\n      setCurrentScore(0);\n      setLastScoreChange(0);\n      setLevel(1);\n\n      // Start a new timer that updates every 10ms for centisecond precision\n      timerIntervalRef.current = setInterval(() => {\n        setElapsedTime(prevTime => prevTime + 10);\n      }, 10);\n      console.log('Timer started');\n    }\n\n    // Cleanup on unmount or phase change\n    return () => {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n        timerIntervalRef.current = null;\n      }\n    };\n  }, [gameState === null || gameState === void 0 ? void 0 : gameState.appPhase]);\n\n  // Update the player list for display and track current player's score\n  const updatePlayerList = useCallback(players => {\n    if (!players || typeof players !== 'object') return;\n\n    // Map player data to what we need\n    const playerEntries = Object.entries(players);\n    const currentSocketId = serverManager.getSocketId();\n\n    // Update current player score state for the score panel\n    if (currentSocketId) {\n      const currentPlayerEntry = playerEntries.find(([id]) => id === currentSocketId);\n      if (currentPlayerEntry) {\n        const [, currentPlayer] = currentPlayerEntry;\n\n        // Update score if changed\n        if (currentPlayer.score !== currentScore) {\n          const scoreChange = Math.max(0, currentPlayer.score - currentScore);\n          if (scoreChange > 0) {\n            setLastScoreChange(scoreChange);\n            // Reset the score change highlight after 1 second\n            setTimeout(() => setLastScoreChange(0), 1000);\n          }\n          setCurrentScore(currentPlayer.score);\n        }\n\n        // Update level if changed\n        if (currentPlayer.level && currentPlayer.level !== level) {\n          setLevel(currentPlayer.level);\n        }\n      }\n    }\n  }, [currentScore, level]);\n\n  // Keyboard control handlers\n  useEffect(() => {\n    if (!socketId || !gameState) return;\n    const handleKeyDown = e => {\n      // Only process key events if game is in progress\n      if (gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n            // First send immediate move, then start DAS\n            serverManager.emit('playerAction', {\n              type: 'moveLeft'\n            });\n            serverManager.emit('playerAction', {\n              type: 'startDAS',\n              direction: 'left'\n            });\n            break;\n          case 'ArrowRight':\n            // First send immediate move, then start DAS\n            serverManager.emit('playerAction', {\n              type: 'moveRight'\n            });\n            serverManager.emit('playerAction', {\n              type: 'startDAS',\n              direction: 'right'\n            });\n            break;\n          case 'ArrowUp':\n          case 'KeyZ':\n            serverManager.emit('playerAction', {\n              type: 'rotate'\n            });\n            break;\n          case 'ArrowDown':\n            serverManager.emit('playerAction', {\n              type: 'softDrop'\n            });\n            break;\n          case 'Space':\n            // guard against auto‑repeat when holding space\n            if (!hardDropActiveRef.current) {\n              serverManager.emit('playerAction', {\n                type: 'hardDrop'\n              });\n              hardDropActiveRef.current = true;\n            }\n            break;\n          default:\n            break;\n        }\n      } else if (gameState.appPhase === 'readyscreen') {\n        // Handle ready toggle on X key press\n        if (e.code === 'KeyX') {\n          const isCurrentlyReady = gameState.readyPlayers && gameState.readyPlayers.includes(socketId);\n          console.log('X key pressed, toggling ready state:', !isCurrentlyReady);\n          serverManager.emit('ready');\n        }\n      }\n    };\n    const handleKeyUp = e => {\n      // Only process key events if game is in progress\n      if (gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            serverManager.emit('playerAction', {\n              type: 'endDAS'\n            });\n            break;\n          case 'ArrowDown':\n            serverManager.emit('playerAction', {\n              type: 'endSoftDrop'\n            });\n            break;\n          case 'Space':\n            // re‑enable hardDrop once key is released\n            hardDropActiveRef.current = false;\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [socketId, gameState]);\n\n  // Room management handlers\n  const handleCreateRoom = useCallback(playerName => {\n    serverManager.emit('createRoom', playerName);\n  }, []);\n  const handleJoinRoom = useCallback((roomCode, playerName) => {\n    serverManager.emit('joinRoom', {\n      roomCode,\n      playerName\n    });\n  }, []);\n  const handleLeaveRoom = useCallback(() => {\n    serverManager.emit('leaveRoom');\n  }, []);\n\n  // Handle player ready state\n  const handlePlayerReady = useCallback(isReady => {\n    serverManager.emit('ready'); // Server expects no parameters\n  }, []);\n\n  // Handle game start\n  const handleStartGame = useCallback(() => {\n    serverManager.emit('startGame');\n  }, []);\n\n  // Handle game mode change\n  const handleSetGameMode = useCallback(mode => {\n    serverManager.emit('setGameMode', mode);\n  }, []);\n\n  // Handle game over timeout\n  const handleGameOverTimeout = useCallback(() => {\n    setIsGameOver(false);\n    setGameOverData(null);\n  }, []);\n\n  // Get the current background image URL\n  const getCurrentBackgroundUrl = () => {\n    if (!BACKGROUND_IMAGES.length) return null;\n    return `${process.env.PUBLIC_URL}/backgrounds/${BACKGROUND_IMAGES[currentBackgroundIndex]}`;\n  };\n\n  // Show loading or error screen\n  if (isConnecting) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Connecting to server...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 12\n    }, this);\n  }\n  if (socketError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Connection Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: socketError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please check that the server is running and the configuration is correct.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        style: {\n          padding: '10px 20px',\n          backgroundColor: '#FF5733',\n          border: 'none',\n          borderRadius: '4px',\n          color: 'white',\n          cursor: 'pointer',\n          marginTop: '20px'\n        },\n        children: \"Retry Connection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show loading screen if no game state\n  if (!gameState) {\n    console.log('No game state yet, showing loading screen');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Waiting for game state...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 12\n    }, this);\n  }\n  console.log('Game state received:', gameState);\n  console.log('Current app phase:', gameState.appPhase);\n\n  // Render appropriate screen based on app phase\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    style: {\n      ...(gameState.appPhase === 'playing' && {\n        backgroundImage: `url(${getCurrentBackgroundUrl()})`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        transition: 'background-image 1s ease-in-out',\n        minHeight: '100vh'\n      })\n    },\n    tabIndex: \"0\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        background: 'rgba(0,0,0,0.7)',\n        color: serverStatus === 'connected' ? '#00ff00' : serverStatus === 'disconnected' ? '#ff0000' : '#ffcc00',\n        padding: '8px 12px',\n        borderRadius: '4px',\n        fontSize: '12px',\n        zIndex: 1000,\n        fontFamily: 'monospace',\n        display: 'flex',\n        flexDirection: 'column',\n        backdropFilter: 'blur(3px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Server: \", connectedServer || 'None']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: '10px',\n          marginTop: '3px',\n          color: serverStatus === 'disconnected' ? '#ff6666' : '#aaa'\n        },\n        children: [\"Status: \", serverStatus, serverStatus === 'disconnected' && ' - Reconnecting...']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 3\n    }, this), serverStatus === 'switchedServer' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '10px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        backgroundColor: 'rgba(50, 50, 50, 0.9)',\n        color: '#fff',\n        padding: '10px 20px',\n        borderRadius: '4px',\n        boxShadow: '0 2px 10px rgba(0,0,0,0.3)',\n        zIndex: 1000,\n        display: 'flex',\n        alignItems: 'center',\n        transition: 'opacity 0.3s ease',\n        opacity: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          marginRight: '10px'\n        },\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 11\n      }, this), \"Reconnected to new server. Game continuing...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 9\n    }, this), gameState.appPhase === 'homescreen' && /*#__PURE__*/_jsxDEV(NewHomeScreen, {\n      onCreateRoom: handleCreateRoom,\n      onJoinRoom: handleJoinRoom,\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 9\n    }, this), gameState.appPhase === 'readyscreen' && /*#__PURE__*/_jsxDEV(ReadyScreen, {\n      roomCode: gameState.roomCode,\n      players: gameState.players || {},\n      currentPlayerId: socketId,\n      readyPlayers: gameState.readyPlayers || [],\n      onReady: handlePlayerReady,\n      onStartGame: handleStartGame,\n      onLeaveRoom: handleLeaveRoom,\n      onSetGameMode: handleSetGameMode,\n      gameMode: gameState.gameMode,\n      gameInProgress: gameState.gameInProgress,\n      isHost: (_gameState$players = gameState.players) === null || _gameState$players === void 0 ? void 0 : (_gameState$players$so = _gameState$players[socketId]) === null || _gameState$players$so === void 0 ? void 0 : _gameState$players$so.isHost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 9\n    }, this), gameState.appPhase === 'playing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        backdropFilter: 'blur(5px)',\n        padding: '20px',\n        borderRadius: '10px',\n        margin: '10px auto',\n        maxWidth: '900px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            margin: 0,\n            fontSize: '28px',\n            color: '#fff'\n          },\n          children: \"Tetristributed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '14px',\n              backgroundColor: '#444',\n              padding: '5px 10px',\n              borderRadius: '4px',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '10px',\n                color: '#aaa'\n              },\n              children: \"ROOM\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold'\n              },\n              children: gameState.roomCode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 712,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '14px',\n              backgroundColor: '#333',\n              padding: '5px 10px',\n              borderRadius: '4px'\n            },\n            children: [\"Player: \", socketId && socketId.substring(0, 4)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(BoardStage, {\n            board: gameState.board || [],\n            players: gameState.players || {},\n            linesToClear: gameState.linesToClear || []\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            minWidth: '220px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(ScorePanel, {\n            score: currentScore,\n            level: level,\n            lastScoreChange: lastScoreChange,\n            elapsedTime: elapsedTime\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: 'rgba(40, 40, 40, 0.9)',\n              padding: '12px',\n              borderRadius: '8px',\n              marginTop: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: '0 0 10px 0',\n                fontSize: '18px',\n                color: '#ccc'\n              },\n              children: \"Players\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                listStyle: 'none',\n                padding: 0,\n                margin: 0\n              },\n              children: Object.entries(gameState.players || {}).map(([id, player]) => {\n                const isCurrentPlayer = id === socketId;\n                const shortId = id.substring(0, 4);\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  style: {\n                    margin: '6px 0',\n                    padding: '8px',\n                    backgroundColor: isCurrentPlayer ? '#444' : '#333',\n                    borderLeft: `4px solid ${player.color || '#ccc'}`,\n                    borderRadius: '4px',\n                    transition: 'background-color 0.3s'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontWeight: isCurrentPlayer ? 'bold' : 'normal',\n                          color: isCurrentPlayer ? '#fff' : '#ccc'\n                        },\n                        children: player.name || `Player ${player.playerNumber || shortId}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 778,\n                        columnNumber: 29\n                      }, this), isCurrentPlayer && /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: '12px',\n                          marginLeft: '5px',\n                          color: '#ffcc00'\n                        },\n                        children: \"(You)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 784,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 777,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        backgroundColor: '#222',\n                        padding: '2px 6px',\n                        borderRadius: '3px',\n                        fontSize: '14px',\n                        fontWeight: 'bold'\n                      },\n                      children: player.score || 0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 792,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 772,\n                    columnNumber: 25\n                  }, this)\n                }, id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 761,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '15px',\n                padding: '8px',\n                backgroundColor: '#222',\n                borderRadius: '4px',\n                textAlign: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#aaa'\n                },\n                children: \"GAME MODE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '16px',\n                  fontWeight: 'bold',\n                  marginTop: '4px'\n                },\n                children: gameState.gameMode || 'Classic'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 815,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 807,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 748,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: 'rgba(40, 40, 40, 0.7)',\n              padding: '12px',\n              borderRadius: '8px',\n              marginTop: '15px',\n              fontSize: '12px',\n              color: '#aaa'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '5px',\n                fontWeight: 'bold',\n                color: '#ccc'\n              },\n              children: \"Controls:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u2190 \\u2192 : Move\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 831,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u2193 : Soft Drop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 832,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u2191 / Z : Rotate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Space : Hard Drop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 834,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 822,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 725,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 9\n    }, this), isGameOver && gameOverData && /*#__PURE__*/_jsxDEV(GameOverScreen, {\n      gameOverData: gameOverData,\n      currentPlayerId: socketId,\n      onTimeout: handleGameOverTimeout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 842,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 589,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"7YhIl0CGEWKXZTqkz4NnCkUqSc8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useRef","BoardStage","NewHomeScreen","ReadyScreen","GameOverScreen","ScorePanel","serverManager","saveGameSession","getGameSession","clearGameSession","jsxDEV","_jsxDEV","BACKGROUND_IMAGES","BACKGROUND_CHANGE_INTERVAL","loadConfig","response","fetch","ok","Error","status","json","error","console","warn","client","serverAddresses","DEBUG","events","state","render","debugLog","type","message","data","log","undefined","App","_s","_gameState$players","_gameState$players$so","socketId","setSocketId","gameState","setGameState","isGameOver","setIsGameOver","gameOverData","setGameOverData","isConnecting","setIsConnecting","setError","socketError","setSocketError","serverStatus","setServerStatus","connectedServer","setConnectedServer","hardDropActiveRef","currentBackgroundIndex","setCurrentBackgroundIndex","backgroundIntervalRef","elapsedTime","setElapsedTime","currentScore","setCurrentScore","lastScoreChange","setLastScoreChange","level","setLevel","timerIntervalRef","connectToServers","initialize","activeSocket","id","serverConfig","serverList","find","s","port","toString","io","uri","split","pop","host","parsedUrl","URL","hostname","emit","change","serverUrl","server","configUrl","e","url","socket","setTimeout","on","initialState","_data$gameState$playe","roomCode","playerName","players","getSocketId","name","hasRejoinedRoom","_data$gameState$playe2","appPhase","prevState","newState","_data$gameState$playe3","activePlayers","readyPlayers","gameInProgress","playerId","player","err","disconnect","current","clearInterval","Math","floor","random","length","setInterval","prevIndex","prevTime","updatePlayerList","playerEntries","Object","entries","currentSocketId","currentPlayerEntry","currentPlayer","score","scoreChange","max","handleKeyDown","code","direction","isCurrentlyReady","includes","handleKeyUp","window","addEventListener","removeEventListener","handleCreateRoom","handleJoinRoom","handleLeaveRoom","handlePlayerReady","isReady","handleStartGame","handleSetGameMode","mode","handleGameOverTimeout","getCurrentBackgroundUrl","process","env","PUBLIC_URL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","location","reload","style","padding","backgroundColor","border","borderRadius","color","cursor","marginTop","backgroundImage","backgroundSize","backgroundPosition","transition","minHeight","tabIndex","position","top","right","background","fontSize","zIndex","fontFamily","display","flexDirection","backdropFilter","left","transform","boxShadow","alignItems","opacity","marginRight","onCreateRoom","onJoinRoom","currentPlayerId","onReady","onStartGame","onLeaveRoom","onSetGameMode","gameMode","isHost","margin","maxWidth","justifyContent","marginBottom","gap","fontWeight","substring","board","linesToClear","minWidth","listStyle","map","isCurrentPlayer","shortId","borderLeft","playerNumber","marginLeft","textAlign","onTimeout","_c","$RefreshReg$"],"sources":["/Users/driesrooryck/Desktop/s25/new_try/distributed-systems/tetris/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport BoardStage from './BoardStage';\nimport NewHomeScreen from './NewHomeScreen';\nimport ReadyScreen from './ReadyScreen';\nimport GameOverScreen from './GameOverScreen';\nimport ScorePanel from './ScorePanel';\nimport './App.css';\n\n// Import server connection manager instead of direct socket.io\nimport serverManager from './utils/serverConnection';\nimport { saveGameSession, getGameSession, clearGameSession } from './utils/sessionStorage';\n\n// Background image configuration\nconst BACKGROUND_IMAGES = [\n  'deep-tetris-color.jpg',\n  'tetris-1920-x-1080-background-hyihqau5t3lalo4e.png',\n  'tetris-2560-x-1600-background-3bjbi7nyulqbller.jpg',\n];\nconst BACKGROUND_CHANGE_INTERVAL = 30000; // 30 seconds\n\n// Load config file to get server address\nconst loadConfig = async () => {\n  try {\n    const response = await fetch('/config.json');\n    if (!response.ok) {\n      throw new Error(`Failed to load config: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.warn('Error loading config, using default server address:', error);\n    return { client: { serverAddresses: [\"http://localhost:3001\"] } };\n  }\n};\n\n// Add debug logger at the top of the file\nconst DEBUG = {\n  events: true,\n  state: true,\n  render: true\n};\n\nfunction debugLog(type, message, data) {\n  if (DEBUG[type]) {\n    console.log(`[DEBUG:${type}] ${message}`, data !== undefined ? data : '');\n  }\n}\n\nfunction App() {\n  const [socketId, setSocketId] = useState(null);\n  const [gameState, setGameState] = useState(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [gameOverData, setGameOverData] = useState(null);\n  const [isConnecting, setIsConnecting] = useState(true);\n  const [error, setError] = useState(null);\n  const [socketError, setSocketError] = useState(null);\n  const [serverStatus, setServerStatus] = useState('connecting');\n  const [connectedServer, setConnectedServer] = useState(null);\n\n  // Hard‐drop guard so holding space won't repeat\n  const hardDropActiveRef = useRef(false);\n\n  // Add state for background rotation\n  const [currentBackgroundIndex, setCurrentBackgroundIndex] = useState(0);\n  const backgroundIntervalRef = useRef(null);\n\n  // Add state for timer and scoring\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const [currentScore, setCurrentScore] = useState(0);\n  const [lastScoreChange, setLastScoreChange] = useState(0);\n  const [level, setLevel] = useState(1);\n  const timerIntervalRef = useRef(null);\n\n  // Connect to servers on component mount\n  useEffect(() => {\n    const connectToServers = async () => {\n      try {\n        setIsConnecting(true);\n        setServerStatus('connecting');\n        \n        // Initialize server manager\n        await serverManager.initialize(\n          // onConnected callback\n          (activeSocket) => {\n            debugLog('events', 'Connected to leader server with ID:', activeSocket.id);\n            setSocketId(activeSocket.id);\n            setIsConnecting(false);\n            setServerStatus('connected');\n            setSocketError(null);\n            \n            // Instead of using the Socket.IO URI, check if the socket has configuredUrl\n            const serverConfig = serverManager.serverList.find(s => \n              s.port.toString() === activeSocket.io.uri.split(':').pop());\n            \n            if (serverConfig) {\n              setConnectedServer(`${serverConfig.host}:${serverConfig.port}`);\n            } else {\n              // Fallback to the Socket.IO URI\n              const parsedUrl = new URL(activeSocket.io.uri);\n              setConnectedServer(`${parsedUrl.hostname}:${parsedUrl.port}`);\n            }\n            \n            // Explicitly request initial state after connection\n            serverManager.emit('requestInitialState');\n          },\n          \n          // onStateChange callback\n          (change) => {\n            if (change.type === 'connected') {\n              try {\n                // Try to find the server in the server list by URL or port\n                const serverUrl = change.server;\n                const port = serverUrl.split(':').pop();\n                const serverConfig = serverManager.serverList.find(s => \n                  s.port.toString() === port);\n                \n                if (serverConfig) {\n                  // Use the IP address from the config\n                  setConnectedServer(`${serverConfig.host}:${serverConfig.port}`);\n                } else {\n                  // Fallback to parsing the URL\n                  const configUrl = new URL(change.server);\n                  setConnectedServer(`${configUrl.hostname}:${configUrl.port}`);\n                }\n              } catch (e) {\n                setConnectedServer(change.server);\n              }\n            }\n            else if (change.type === 'leaderChanged') {\n              debugLog('events', 'Leader server changed to:', change.server.url);\n              setSocketId(change.server.socket.id);\n              \n              // Update server URL info\n              try {\n                const serverUrl = change.server.url;\n                const parsedUrl = new URL(serverUrl);\n                setConnectedServer(`${parsedUrl.hostname}:${parsedUrl.port}`);\n              } catch (e) {\n                setConnectedServer(change.server.url || 'unknown');\n              }\n              \n              // Server change notification\n              setServerStatus('switchedServer');\n              setTimeout(() => setServerStatus('connected'), 3000);\n              \n              // Re-request initial state after server change\n              serverManager.emit('requestInitialState');\n            }\n            else if (change.type === 'disconnected') {\n              setConnectedServer(null);\n            }\n            else if (change.type === 'allServersDown') {\n              setSocketError('All servers are down. Please try again later.');\n              setServerStatus('disconnected');\n              setConnectedServer(null);\n            }\n          }\n        );\n        \n        // Set up event handlers\n        \n        // Handle initial state\n        serverManager.on('init', (initialState) => {\n          debugLog('events', 'Received init event with state:', initialState);\n          setGameState(initialState);\n        });\n        \n        // Handle room rejoined - when reconnecting to existing session\n        serverManager.on('roomRejoined', (data) => {\n          debugLog('events', 'Received roomRejoined event with data:', data);\n          \n          // Save the new session data with updated socket ID\n          saveGameSession({\n            roomCode: data.roomCode,\n            playerName: data.gameState.players[serverManager.getSocketId()]?.name || 'Player',\n            socketId: serverManager.getSocketId()\n          });\n          \n          // Track successful reconnection to avoid fallback attempts\n          serverManager.hasRejoinedRoom = true;\n          \n          // Update game state for player\n          setGameState(data.gameState);\n          setError(null);\n        });\n        \n        // Handle room creation - save session\n        serverManager.on('roomCreated', (data) => {\n          debugLog('events', 'Received roomCreated event with data:', data);\n          \n          // Save session data for automatic reconnection\n          saveGameSession({\n            roomCode: data.roomCode,\n            playerName: data.gameState.players[serverManager.getSocketId()]?.name || 'Player',\n            socketId: serverManager.getSocketId()\n          });\n          \n          debugLog('state', 'Setting appPhase to readyscreen from:', gameState?.appPhase);\n          setGameState(prevState => {\n            const newState = {\n              ...data.gameState,\n              appPhase: 'readyscreen'\n            };\n            debugLog('state', 'New gameState after roomCreated:', newState);\n            return newState;\n          });\n          setError(null);\n        });\n        \n        // Handle room join - save session\n        serverManager.on('roomJoined', (data) => {\n          debugLog('events', 'Received roomJoined event with data:', data);\n          \n          // Save session data for automatic reconnection\n          saveGameSession({\n            roomCode: data.roomCode,\n            playerName: data.gameState.players[serverManager.getSocketId()]?.name || 'Player',\n            socketId: serverManager.getSocketId()\n          });\n          \n          setGameState(prevState => {\n            const newState = {\n              ...data.gameState,\n              appPhase: 'readyscreen'\n            };\n            debugLog('state', 'New gameState after roomJoined:', newState);\n            return newState;\n          });\n          setError(null);\n        });\n        \n        // Handle leaving room - clear session\n        serverManager.on('roomLeft', (data) => {\n          debugLog('events', 'Received roomLeft event with data:', data);\n          \n          // Clear session data when leaving room\n          clearGameSession();\n          \n          // Set app phase to homescreen\n          setGameState({\n            appPhase: 'homescreen',\n            players: {},\n            roomCode: null,\n            activePlayers: [],\n            readyPlayers: []\n          });\n        });\n        \n        // Handle game state updates\n        serverManager.on('gameState', (newState) => {\n          // Improve debug logging to show what we receive\n          debugLog('events', 'Received gameState update with appPhase:', newState?.appPhase);\n          debugLog('events', 'Game state type:', typeof newState);\n\n          // Log when we're receiving the init state\n          if (gameState === null) {\n            console.log('Game state received:', newState);\n            console.log('Current app phase:', gameState?.appPhase);\n            \n            // If newState is valid, use it\n            if (newState && typeof newState === 'object' && newState.appPhase) {\n              debugLog('state', 'Setting initial game state with appPhase:', newState.appPhase);\n              setGameState(newState);\n            } else {\n              // Create a default homescreen state if the received state is invalid\n              console.warn('Received invalid game state, using default homescreen state');\n              setGameState({\n                appPhase: 'homescreen',\n                socketId: serverManager.getSocketId(),\n                players: {},\n                activePlayers: [],\n                readyPlayers: [],\n                gameInProgress: false\n              });\n            }\n          } else {\n            setGameState(prevState => {\n              // If we're showing a readyscreen from a room we just created or joined,\n              // don't let a gameState event with homescreen override it\n              if (prevState?.appPhase === 'readyscreen' && newState?.appPhase === 'homescreen') {\n                debugLog('state', 'Ignoring homescreen gameState while in readyscreen');\n                return prevState;\n              }\n              debugLog('state', 'Updating gameState from:', prevState?.appPhase, 'to:', newState?.appPhase);\n              return newState;\n            });\n          }\n        });\n\n        // Handle errors\n        serverManager.on('error', ({ message }) => {\n          debugLog('events', 'Received server error:', message);\n          setError(message);\n        });\n        \n        // Handle game over - clear session\n        serverManager.on('gameOver', (data) => {\n          console.log('Game over with data:', data);\n          \n          // Clear session on game over\n          clearGameSession();\n          \n          setIsGameOver(true);\n          setGameOverData(data);\n        });\n        \n        // Handle player joined notification\n        serverManager.on('playerJoined', ({ playerId, player, gameState }) => {\n          console.log(`Player joined: ${playerId}`);\n          setGameState(gameState);\n        });\n        \n        // Handle player left notification\n        serverManager.on('playerLeft', ({ playerId, gameState }) => {\n          console.log(`Player left: ${playerId}`);\n          setGameState(gameState);\n        });\n        \n        // Handle host assignment (when previous host leaves)\n        serverManager.on('hostAssigned', ({ gameState }) => {\n          console.log('You are now the host');\n          setGameState(gameState);\n        });\n      } catch (err) {\n        console.error('Error connecting to servers:', err);\n        setSocketError(`Error connecting to servers: ${err.message}`);\n        setIsConnecting(false);\n        setServerStatus('error');\n      }\n    };\n    \n    connectToServers();\n    \n    // Cleanup on component unmount\n    return () => {\n      serverManager.disconnect();\n    };\n  }, []);\n\n  // Background rotation effect - only active during gameplay\n  useEffect(() => {\n    // Clear any existing background rotation interval\n    if (backgroundIntervalRef.current) {\n      clearInterval(backgroundIntervalRef.current);\n      backgroundIntervalRef.current = null;\n    }\n\n    // Start background rotation when game is playing\n    if (gameState && gameState.appPhase === 'playing') {\n      // Randomize starting background\n      setCurrentBackgroundIndex(Math.floor(Math.random() * BACKGROUND_IMAGES.length));\n\n      // Set interval to rotate backgrounds\n      backgroundIntervalRef.current = setInterval(() => {\n        setCurrentBackgroundIndex(prevIndex =>\n          (prevIndex + 1) % BACKGROUND_IMAGES.length\n        );\n      }, BACKGROUND_CHANGE_INTERVAL);\n    }\n\n    // Cleanup on unmount or phase change\n    return () => {\n      if (backgroundIntervalRef.current) {\n        clearInterval(backgroundIntervalRef.current);\n        backgroundIntervalRef.current = null;\n      }\n    };\n  }, [gameState?.appPhase]);\n\n  // Timer management based on game phase\n  useEffect(() => {\n    // Clean up the previous interval if it exists\n    if (timerIntervalRef.current) {\n      clearInterval(timerIntervalRef.current);\n      timerIntervalRef.current = null;\n    }\n\n    if (gameState && gameState.appPhase === 'playing') {\n      // Reset the timer when game starts\n      setElapsedTime(0);\n      setCurrentScore(0);\n      setLastScoreChange(0);\n      setLevel(1);\n\n      // Start a new timer that updates every 10ms for centisecond precision\n      timerIntervalRef.current = setInterval(() => {\n        setElapsedTime(prevTime => prevTime + 10);\n      }, 10);\n\n      console.log('Timer started');\n    }\n\n    // Cleanup on unmount or phase change\n    return () => {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n        timerIntervalRef.current = null;\n      }\n    };\n  }, [gameState?.appPhase]);\n\n  // Update the player list for display and track current player's score\n  const updatePlayerList = useCallback((players) => {\n    if (!players || typeof players !== 'object') return;\n\n    // Map player data to what we need\n    const playerEntries = Object.entries(players);\n    const currentSocketId = serverManager.getSocketId();\n\n    // Update current player score state for the score panel\n    if (currentSocketId) {\n      const currentPlayerEntry = playerEntries.find(([id]) => id === currentSocketId);\n      if (currentPlayerEntry) {\n        const [, currentPlayer] = currentPlayerEntry;\n\n        // Update score if changed\n        if (currentPlayer.score !== currentScore) {\n          const scoreChange = Math.max(0, currentPlayer.score - currentScore);\n          if (scoreChange > 0) {\n            setLastScoreChange(scoreChange);\n            // Reset the score change highlight after 1 second\n            setTimeout(() => setLastScoreChange(0), 1000);\n          }\n          setCurrentScore(currentPlayer.score);\n        }\n\n        // Update level if changed\n        if (currentPlayer.level && currentPlayer.level !== level) {\n          setLevel(currentPlayer.level);\n        }\n      }\n    }\n  }, [currentScore, level]);\n\n  // Keyboard control handlers\n  useEffect(() => {\n    if (!socketId || !gameState) return;\n\n    const handleKeyDown = (e) => {\n      // Only process key events if game is in progress\n      if (gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n            // First send immediate move, then start DAS\n            serverManager.emit('playerAction', { type: 'moveLeft' });\n            serverManager.emit('playerAction', { type: 'startDAS', direction: 'left' });\n            break;\n          case 'ArrowRight':\n            // First send immediate move, then start DAS\n            serverManager.emit('playerAction', { type: 'moveRight' });\n            serverManager.emit('playerAction', { type: 'startDAS', direction: 'right' });\n            break;\n          case 'ArrowUp':\n          case 'KeyZ':\n            serverManager.emit('playerAction', { type: 'rotate' });\n            break;\n          case 'ArrowDown':\n            serverManager.emit('playerAction', { type: 'softDrop' });\n            break;\n          case 'Space':\n            // guard against auto‑repeat when holding space\n            if (!hardDropActiveRef.current) {\n              serverManager.emit('playerAction', { type: 'hardDrop' });\n              hardDropActiveRef.current = true;\n            }\n            break;\n          default:\n            break;\n        }\n      } else if (gameState.appPhase === 'readyscreen') {\n        // Handle ready toggle on X key press\n        if (e.code === 'KeyX') {\n          const isCurrentlyReady = gameState.readyPlayers && \n            gameState.readyPlayers.includes(socketId);\n          console.log('X key pressed, toggling ready state:', !isCurrentlyReady);\n          serverManager.emit('ready');\n        }\n      }\n    };\n\n    const handleKeyUp = (e) => {\n      // Only process key events if game is in progress\n      if (gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            serverManager.emit('playerAction', { type: 'endDAS' });\n            break;\n          case 'ArrowDown':\n            serverManager.emit('playerAction', { type: 'endSoftDrop' });\n            break;\n          case 'Space':\n            // re‑enable hardDrop once key is released\n            hardDropActiveRef.current = false;\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [socketId, gameState]);\n\n  // Room management handlers\n  const handleCreateRoom = useCallback((playerName) => {\n    serverManager.emit('createRoom', playerName);\n  }, []);\n  \n  const handleJoinRoom = useCallback((roomCode, playerName) => {\n    serverManager.emit('joinRoom', { roomCode, playerName });\n  }, []);\n  \n  const handleLeaveRoom = useCallback(() => {\n    serverManager.emit('leaveRoom');\n  }, []);\n\n  // Handle player ready state\n  const handlePlayerReady = useCallback((isReady) => {\n    serverManager.emit('ready');  // Server expects no parameters\n  }, []);\n\n  // Handle game start\n  const handleStartGame = useCallback(() => {\n    serverManager.emit('startGame');\n  }, []);\n\n  // Handle game mode change\n  const handleSetGameMode = useCallback((mode) => {\n    serverManager.emit('setGameMode', mode);\n  }, []);\n\n  // Handle game over timeout\n  const handleGameOverTimeout = useCallback(() => {\n    setIsGameOver(false);\n    setGameOverData(null);\n  }, []);\n\n  // Get the current background image URL\n  const getCurrentBackgroundUrl = () => {\n    if (!BACKGROUND_IMAGES.length) return null;\n    return `${process.env.PUBLIC_URL}/backgrounds/${BACKGROUND_IMAGES[currentBackgroundIndex]}`;\n  };\n\n  // Show loading or error screen\n  if (isConnecting) {\n    return <div className=\"App\"><h1>Connecting to server...</h1></div>;\n  }\n\n  if (socketError) {\n    return (\n      <div className=\"App\">\n        <h1>Connection Error</h1>\n        <p>{socketError}</p>\n        <p>Please check that the server is running and the configuration is correct.</p>\n        <button\n          onClick={() => window.location.reload()}\n          style={{\n            padding: '10px 20px',\n            backgroundColor: '#FF5733',\n            border: 'none',\n            borderRadius: '4px',\n            color: 'white',\n            cursor: 'pointer',\n            marginTop: '20px'\n          }}\n        >\n          Retry Connection\n        </button>\n      </div>\n    );\n  }\n\n  // Show loading screen if no game state\n  if (!gameState) {\n    console.log('No game state yet, showing loading screen');\n    return <div className=\"App\"><h1>Waiting for game state...</h1></div>;\n  }\n  console.log('Game state received:', gameState);\n  console.log('Current app phase:', gameState.appPhase);\n\n  // Render appropriate screen based on app phase\n  return (\n    <div\n      className=\"App\"\n      style={{\n        ...(gameState.appPhase === 'playing' && {\n          backgroundImage: `url(${getCurrentBackgroundUrl()})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          transition: 'background-image 1s ease-in-out',\n          minHeight: '100vh'\n        })\n      }}\n      tabIndex=\"0\"\n    >\n\n  {/* Server Connection Indicator - Always visible */}\n  <div \n    style={{\n      position: 'fixed',\n      top: '10px',\n      right: '10px',\n      background: 'rgba(0,0,0,0.7)',\n      color: serverStatus === 'connected' ? '#00ff00' : \n            serverStatus === 'disconnected' ? '#ff0000' : \n            '#ffcc00',\n      padding: '8px 12px',\n      borderRadius: '4px',\n      fontSize: '12px',\n      zIndex: 1000,\n      fontFamily: 'monospace',\n      display: 'flex',\n      flexDirection: 'column',\n      backdropFilter: 'blur(3px)'\n    }}\n  >\n    <span>Server: {connectedServer || 'None'}</span>\n    <span style={{ \n      fontSize: '10px', \n      marginTop: '3px', \n      color: serverStatus === 'disconnected' ? '#ff6666' : '#aaa'\n    }}>\n      Status: {serverStatus}\n      {serverStatus === 'disconnected' && ' - Reconnecting...'}\n    </span>\n  </div>\n\n      {/* Server Status Notification */}\n      {serverStatus === 'switchedServer' && (\n        <div style={{\n          position: 'fixed',\n          top: '10px',\n          left: '50%',\n          transform: 'translateX(-50%)',\n          backgroundColor: 'rgba(50, 50, 50, 0.9)',\n          color: '#fff',\n          padding: '10px 20px',\n          borderRadius: '4px',\n          boxShadow: '0 2px 10px rgba(0,0,0,0.3)',\n          zIndex: 1000,\n          display: 'flex',\n          alignItems: 'center',\n          transition: 'opacity 0.3s ease',\n          opacity: 1\n        }}>\n          <span style={{ marginRight: '10px' }}>⚠️</span>\n          Reconnected to new server. Game continuing...\n        </div>\n      )}\n      \n      {gameState.appPhase === 'homescreen' && (\n        <NewHomeScreen\n          onCreateRoom={handleCreateRoom}\n          onJoinRoom={handleJoinRoom}\n          error={error}\n        />\n      )}\n      \n      {gameState.appPhase === 'readyscreen' && (\n        <ReadyScreen\n          roomCode={gameState.roomCode}\n          players={gameState.players || {}}\n          currentPlayerId={socketId}\n          readyPlayers={gameState.readyPlayers || []}\n          onReady={handlePlayerReady}\n          onStartGame={handleStartGame}\n          onLeaveRoom={handleLeaveRoom}\n          onSetGameMode={handleSetGameMode}\n          gameMode={gameState.gameMode}\n          gameInProgress={gameState.gameInProgress}\n          isHost={gameState.players?.[socketId]?.isHost}\n        />\n      )}\n\n      {gameState.appPhase === 'playing' && (\n        <div style={{\n          backgroundColor: 'rgba(0, 0, 0, 0.8)',\n          backdropFilter: 'blur(5px)',\n          padding: '20px',\n          borderRadius: '10px',\n          margin: '10px auto',\n          maxWidth: '900px'\n        }}>\n          <div style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: '15px'\n          }}>\n            <h1 style={{ margin: 0, fontSize: '28px', color: '#fff' }}>Tetristributed</h1>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '15px'\n            }}>\n              <div style={{\n                fontSize: '14px',\n                backgroundColor: '#444',\n                padding: '5px 10px',\n                borderRadius: '4px',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center'\n              }}>\n                <span style={{fontSize: '10px', color: '#aaa'}}>ROOM</span>\n                <span style={{fontWeight: 'bold'}}>{gameState.roomCode}</span>\n              </div>\n              <div style={{\n                fontSize: '14px',\n                backgroundColor: '#333',\n                padding: '5px 10px',\n                borderRadius: '4px'\n              }}>\n                Player: {socketId && socketId.substring(0, 4)}\n              </div>\n            </div>\n          </div>\n\n          <div style={{ display: 'flex', gap: '20px' }}>\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n              <BoardStage\n                board={gameState.board || []}\n                players={gameState.players || {}}\n                linesToClear={gameState.linesToClear || []}\n              />\n            </div>\n\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              minWidth: '220px'\n            }}>\n              {/* Integrated Score Panel with Timer */}\n              <ScorePanel\n                score={currentScore}\n                level={level}\n                lastScoreChange={lastScoreChange}\n                elapsedTime={elapsedTime}\n              />\n\n              {/* Players List */}\n              <div style={{\n                backgroundColor: 'rgba(40, 40, 40, 0.9)',\n                padding: '12px',\n                borderRadius: '8px',\n                marginTop: '15px'\n              }}>\n                <h2 style={{ margin: '0 0 10px 0', fontSize: '18px', color: '#ccc' }}>Players</h2>\n                <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n                  {Object.entries(gameState.players || {}).map(([id, player]) => {\n                    const isCurrentPlayer = id === socketId;\n                    const shortId = id.substring(0, 4);\n\n                    return (\n                      <li\n                        key={id}\n                        style={{\n                          margin: '6px 0',\n                          padding: '8px',\n                          backgroundColor: isCurrentPlayer ? '#444' : '#333',\n                          borderLeft: `4px solid ${player.color || '#ccc'}`,\n                          borderRadius: '4px',\n                          transition: 'background-color 0.3s'\n                        }}\n                      >\n                        <div style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'space-between'\n                        }}>\n                          <div>\n                            <span style={{\n                              fontWeight: isCurrentPlayer ? 'bold' : 'normal',\n                              color: isCurrentPlayer ? '#fff' : '#ccc'\n                            }}>\n                              {player.name || `Player ${player.playerNumber || shortId}`}\n                            </span>\n                            {isCurrentPlayer && <span style={{\n                              fontSize: '12px',\n                              marginLeft: '5px',\n                              color: '#ffcc00'\n                            }}>\n                              (You)\n                            </span>}\n                          </div>\n                          <div style={{\n                            backgroundColor: '#222',\n                            padding: '2px 6px',\n                            borderRadius: '3px',\n                            fontSize: '14px',\n                            fontWeight: 'bold'\n                          }}>\n                            {player.score || 0}\n                          </div>\n                        </div>\n                      </li>\n                    );\n                  })}\n                </ul>\n\n                <div style={{\n                  marginTop: '15px',\n                  padding: '8px',\n                  backgroundColor: '#222',\n                  borderRadius: '4px',\n                  textAlign: 'center'\n                }}>\n                  <div style={{ fontSize: '12px', color: '#aaa' }}>GAME MODE</div>\n                  <div style={{ fontSize: '16px', fontWeight: 'bold', marginTop: '4px' }}>\n                    {gameState.gameMode || 'Classic'}\n                  </div>\n                </div>\n              </div>\n\n              {/* Controls Help */}\n              <div style={{\n                backgroundColor: 'rgba(40, 40, 40, 0.7)',\n                padding: '12px',\n                borderRadius: '8px',\n                marginTop: '15px',\n                fontSize: '12px',\n                color: '#aaa'\n              }}>\n                <div style={{ marginBottom: '5px', fontWeight: 'bold', color: '#ccc' }}>Controls:</div>\n                <div>← → : Move</div>\n                <div>↓ : Soft Drop</div>\n                <div>↑ / Z : Rotate</div>\n                <div>Space : Hard Drop</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {isGameOver && gameOverData && (\n        <GameOverScreen\n          gameOverData={gameOverData}\n          currentPlayerId={socketId}\n          onTimeout={handleGameOverTimeout}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AACvE,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAO,WAAW;;AAElB;AACA,OAAOC,aAAa,MAAM,0BAA0B;AACpD,SAASC,eAAe,EAAEC,cAAc,EAAEC,gBAAgB,QAAQ,wBAAwB;;AAE1F;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,iBAAiB,GAAG,CACxB,uBAAuB,EACvB,oDAAoD,EACpD,oDAAoD,CACrD;AACD,MAAMC,0BAA0B,GAAG,KAAK,CAAC,CAAC;;AAE1C;AACA,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;EAC7B,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,cAAc,CAAC;IAC5C,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,0BAA0BH,QAAQ,CAACI,MAAM,EAAE,CAAC;IAC9D;IACA,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,qDAAqD,EAAEF,KAAK,CAAC;IAC1E,OAAO;MAAEG,MAAM,EAAE;QAAEC,eAAe,EAAE,CAAC,uBAAuB;MAAE;IAAE,CAAC;EACnE;AACF,CAAC;;AAED;AACA,MAAMC,KAAK,GAAG;EACZC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE;AACV,CAAC;AAED,SAASC,QAAQA,CAACC,IAAI,EAAEC,OAAO,EAAEC,IAAI,EAAE;EACrC,IAAIP,KAAK,CAACK,IAAI,CAAC,EAAE;IACfT,OAAO,CAACY,GAAG,CAAC,UAAUH,IAAI,KAAKC,OAAO,EAAE,EAAEC,IAAI,KAAKE,SAAS,GAAGF,IAAI,GAAG,EAAE,CAAC;EAC3E;AACF;AAEA,SAASG,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,kBAAA,EAAAC,qBAAA;EACb,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC4C,SAAS,EAAEC,YAAY,CAAC,GAAG7C,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAAC8C,UAAU,EAAEC,aAAa,CAAC,GAAG/C,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACgD,YAAY,EAAEC,eAAe,CAAC,GAAGjD,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACkD,YAAY,EAAEC,eAAe,CAAC,GAAGnD,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACuB,KAAK,EAAE6B,QAAQ,CAAC,GAAGpD,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACqD,WAAW,EAAEC,cAAc,CAAC,GAAGtD,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACuD,YAAY,EAAEC,eAAe,CAAC,GAAGxD,QAAQ,CAAC,YAAY,CAAC;EAC9D,MAAM,CAACyD,eAAe,EAAEC,kBAAkB,CAAC,GAAG1D,QAAQ,CAAC,IAAI,CAAC;;EAE5D;EACA,MAAM2D,iBAAiB,GAAGzD,MAAM,CAAC,KAAK,CAAC;;EAEvC;EACA,MAAM,CAAC0D,sBAAsB,EAAEC,yBAAyB,CAAC,GAAG7D,QAAQ,CAAC,CAAC,CAAC;EACvE,MAAM8D,qBAAqB,GAAG5D,MAAM,CAAC,IAAI,CAAC;;EAE1C;EACA,MAAM,CAAC6D,WAAW,EAAEC,cAAc,CAAC,GAAGhE,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACiE,YAAY,EAAEC,eAAe,CAAC,GAAGlE,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM,CAACmE,eAAe,EAAEC,kBAAkB,CAAC,GAAGpE,QAAQ,CAAC,CAAC,CAAC;EACzD,MAAM,CAACqE,KAAK,EAAEC,QAAQ,CAAC,GAAGtE,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAMuE,gBAAgB,GAAGrE,MAAM,CAAC,IAAI,CAAC;;EAErC;EACAH,SAAS,CAAC,MAAM;IACd,MAAMyE,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI;QACFrB,eAAe,CAAC,IAAI,CAAC;QACrBK,eAAe,CAAC,YAAY,CAAC;;QAE7B;QACA,MAAMhD,aAAa,CAACiE,UAAU;QAC5B;QACCC,YAAY,IAAK;UAChB1C,QAAQ,CAAC,QAAQ,EAAE,qCAAqC,EAAE0C,YAAY,CAACC,EAAE,CAAC;UAC1EhC,WAAW,CAAC+B,YAAY,CAACC,EAAE,CAAC;UAC5BxB,eAAe,CAAC,KAAK,CAAC;UACtBK,eAAe,CAAC,WAAW,CAAC;UAC5BF,cAAc,CAAC,IAAI,CAAC;;UAEpB;UACA,MAAMsB,YAAY,GAAGpE,aAAa,CAACqE,UAAU,CAACC,IAAI,CAACC,CAAC,IAClDA,CAAC,CAACC,IAAI,CAACC,QAAQ,CAAC,CAAC,KAAKP,YAAY,CAACQ,EAAE,CAACC,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC;UAE7D,IAAIT,YAAY,EAAE;YAChBlB,kBAAkB,CAAC,GAAGkB,YAAY,CAACU,IAAI,IAAIV,YAAY,CAACI,IAAI,EAAE,CAAC;UACjE,CAAC,MAAM;YACL;YACA,MAAMO,SAAS,GAAG,IAAIC,GAAG,CAACd,YAAY,CAACQ,EAAE,CAACC,GAAG,CAAC;YAC9CzB,kBAAkB,CAAC,GAAG6B,SAAS,CAACE,QAAQ,IAAIF,SAAS,CAACP,IAAI,EAAE,CAAC;UAC/D;;UAEA;UACAxE,aAAa,CAACkF,IAAI,CAAC,qBAAqB,CAAC;QAC3C,CAAC;QAED;QACCC,MAAM,IAAK;UACV,IAAIA,MAAM,CAAC1D,IAAI,KAAK,WAAW,EAAE;YAC/B,IAAI;cACF;cACA,MAAM2D,SAAS,GAAGD,MAAM,CAACE,MAAM;cAC/B,MAAMb,IAAI,GAAGY,SAAS,CAACR,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;cACvC,MAAMT,YAAY,GAAGpE,aAAa,CAACqE,UAAU,CAACC,IAAI,CAACC,CAAC,IAClDA,CAAC,CAACC,IAAI,CAACC,QAAQ,CAAC,CAAC,KAAKD,IAAI,CAAC;cAE7B,IAAIJ,YAAY,EAAE;gBAChB;gBACAlB,kBAAkB,CAAC,GAAGkB,YAAY,CAACU,IAAI,IAAIV,YAAY,CAACI,IAAI,EAAE,CAAC;cACjE,CAAC,MAAM;gBACL;gBACA,MAAMc,SAAS,GAAG,IAAIN,GAAG,CAACG,MAAM,CAACE,MAAM,CAAC;gBACxCnC,kBAAkB,CAAC,GAAGoC,SAAS,CAACL,QAAQ,IAAIK,SAAS,CAACd,IAAI,EAAE,CAAC;cAC/D;YACF,CAAC,CAAC,OAAOe,CAAC,EAAE;cACVrC,kBAAkB,CAACiC,MAAM,CAACE,MAAM,CAAC;YACnC;UACF,CAAC,MACI,IAAIF,MAAM,CAAC1D,IAAI,KAAK,eAAe,EAAE;YACxCD,QAAQ,CAAC,QAAQ,EAAE,2BAA2B,EAAE2D,MAAM,CAACE,MAAM,CAACG,GAAG,CAAC;YAClErD,WAAW,CAACgD,MAAM,CAACE,MAAM,CAACI,MAAM,CAACtB,EAAE,CAAC;;YAEpC;YACA,IAAI;cACF,MAAMiB,SAAS,GAAGD,MAAM,CAACE,MAAM,CAACG,GAAG;cACnC,MAAMT,SAAS,GAAG,IAAIC,GAAG,CAACI,SAAS,CAAC;cACpClC,kBAAkB,CAAC,GAAG6B,SAAS,CAACE,QAAQ,IAAIF,SAAS,CAACP,IAAI,EAAE,CAAC;YAC/D,CAAC,CAAC,OAAOe,CAAC,EAAE;cACVrC,kBAAkB,CAACiC,MAAM,CAACE,MAAM,CAACG,GAAG,IAAI,SAAS,CAAC;YACpD;;YAEA;YACAxC,eAAe,CAAC,gBAAgB,CAAC;YACjC0C,UAAU,CAAC,MAAM1C,eAAe,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC;;YAEpD;YACAhD,aAAa,CAACkF,IAAI,CAAC,qBAAqB,CAAC;UAC3C,CAAC,MACI,IAAIC,MAAM,CAAC1D,IAAI,KAAK,cAAc,EAAE;YACvCyB,kBAAkB,CAAC,IAAI,CAAC;UAC1B,CAAC,MACI,IAAIiC,MAAM,CAAC1D,IAAI,KAAK,gBAAgB,EAAE;YACzCqB,cAAc,CAAC,+CAA+C,CAAC;YAC/DE,eAAe,CAAC,cAAc,CAAC;YAC/BE,kBAAkB,CAAC,IAAI,CAAC;UAC1B;QACF,CACF,CAAC;;QAED;;QAEA;QACAlD,aAAa,CAAC2F,EAAE,CAAC,MAAM,EAAGC,YAAY,IAAK;UACzCpE,QAAQ,CAAC,QAAQ,EAAE,iCAAiC,EAAEoE,YAAY,CAAC;UACnEvD,YAAY,CAACuD,YAAY,CAAC;QAC5B,CAAC,CAAC;;QAEF;QACA5F,aAAa,CAAC2F,EAAE,CAAC,cAAc,EAAGhE,IAAI,IAAK;UAAA,IAAAkE,qBAAA;UACzCrE,QAAQ,CAAC,QAAQ,EAAE,wCAAwC,EAAEG,IAAI,CAAC;;UAElE;UACA1B,eAAe,CAAC;YACd6F,QAAQ,EAAEnE,IAAI,CAACmE,QAAQ;YACvBC,UAAU,EAAE,EAAAF,qBAAA,GAAAlE,IAAI,CAACS,SAAS,CAAC4D,OAAO,CAAChG,aAAa,CAACiG,WAAW,CAAC,CAAC,CAAC,cAAAJ,qBAAA,uBAAnDA,qBAAA,CAAqDK,IAAI,KAAI,QAAQ;YACjFhE,QAAQ,EAAElC,aAAa,CAACiG,WAAW,CAAC;UACtC,CAAC,CAAC;;UAEF;UACAjG,aAAa,CAACmG,eAAe,GAAG,IAAI;;UAEpC;UACA9D,YAAY,CAACV,IAAI,CAACS,SAAS,CAAC;UAC5BQ,QAAQ,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC;;QAEF;QACA5C,aAAa,CAAC2F,EAAE,CAAC,aAAa,EAAGhE,IAAI,IAAK;UAAA,IAAAyE,sBAAA;UACxC5E,QAAQ,CAAC,QAAQ,EAAE,uCAAuC,EAAEG,IAAI,CAAC;;UAEjE;UACA1B,eAAe,CAAC;YACd6F,QAAQ,EAAEnE,IAAI,CAACmE,QAAQ;YACvBC,UAAU,EAAE,EAAAK,sBAAA,GAAAzE,IAAI,CAACS,SAAS,CAAC4D,OAAO,CAAChG,aAAa,CAACiG,WAAW,CAAC,CAAC,CAAC,cAAAG,sBAAA,uBAAnDA,sBAAA,CAAqDF,IAAI,KAAI,QAAQ;YACjFhE,QAAQ,EAAElC,aAAa,CAACiG,WAAW,CAAC;UACtC,CAAC,CAAC;UAEFzE,QAAQ,CAAC,OAAO,EAAE,uCAAuC,EAAEY,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEiE,QAAQ,CAAC;UAC/EhE,YAAY,CAACiE,SAAS,IAAI;YACxB,MAAMC,QAAQ,GAAG;cACf,GAAG5E,IAAI,CAACS,SAAS;cACjBiE,QAAQ,EAAE;YACZ,CAAC;YACD7E,QAAQ,CAAC,OAAO,EAAE,kCAAkC,EAAE+E,QAAQ,CAAC;YAC/D,OAAOA,QAAQ;UACjB,CAAC,CAAC;UACF3D,QAAQ,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC;;QAEF;QACA5C,aAAa,CAAC2F,EAAE,CAAC,YAAY,EAAGhE,IAAI,IAAK;UAAA,IAAA6E,sBAAA;UACvChF,QAAQ,CAAC,QAAQ,EAAE,sCAAsC,EAAEG,IAAI,CAAC;;UAEhE;UACA1B,eAAe,CAAC;YACd6F,QAAQ,EAAEnE,IAAI,CAACmE,QAAQ;YACvBC,UAAU,EAAE,EAAAS,sBAAA,GAAA7E,IAAI,CAACS,SAAS,CAAC4D,OAAO,CAAChG,aAAa,CAACiG,WAAW,CAAC,CAAC,CAAC,cAAAO,sBAAA,uBAAnDA,sBAAA,CAAqDN,IAAI,KAAI,QAAQ;YACjFhE,QAAQ,EAAElC,aAAa,CAACiG,WAAW,CAAC;UACtC,CAAC,CAAC;UAEF5D,YAAY,CAACiE,SAAS,IAAI;YACxB,MAAMC,QAAQ,GAAG;cACf,GAAG5E,IAAI,CAACS,SAAS;cACjBiE,QAAQ,EAAE;YACZ,CAAC;YACD7E,QAAQ,CAAC,OAAO,EAAE,iCAAiC,EAAE+E,QAAQ,CAAC;YAC9D,OAAOA,QAAQ;UACjB,CAAC,CAAC;UACF3D,QAAQ,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC;;QAEF;QACA5C,aAAa,CAAC2F,EAAE,CAAC,UAAU,EAAGhE,IAAI,IAAK;UACrCH,QAAQ,CAAC,QAAQ,EAAE,oCAAoC,EAAEG,IAAI,CAAC;;UAE9D;UACAxB,gBAAgB,CAAC,CAAC;;UAElB;UACAkC,YAAY,CAAC;YACXgE,QAAQ,EAAE,YAAY;YACtBL,OAAO,EAAE,CAAC,CAAC;YACXF,QAAQ,EAAE,IAAI;YACdW,aAAa,EAAE,EAAE;YACjBC,YAAY,EAAE;UAChB,CAAC,CAAC;QACJ,CAAC,CAAC;;QAEF;QACA1G,aAAa,CAAC2F,EAAE,CAAC,WAAW,EAAGY,QAAQ,IAAK;UAC1C;UACA/E,QAAQ,CAAC,QAAQ,EAAE,0CAA0C,EAAE+E,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEF,QAAQ,CAAC;UAClF7E,QAAQ,CAAC,QAAQ,EAAE,kBAAkB,EAAE,OAAO+E,QAAQ,CAAC;;UAEvD;UACA,IAAInE,SAAS,KAAK,IAAI,EAAE;YACtBpB,OAAO,CAACY,GAAG,CAAC,sBAAsB,EAAE2E,QAAQ,CAAC;YAC7CvF,OAAO,CAACY,GAAG,CAAC,oBAAoB,EAAEQ,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEiE,QAAQ,CAAC;;YAEtD;YACA,IAAIE,QAAQ,IAAI,OAAOA,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,CAACF,QAAQ,EAAE;cACjE7E,QAAQ,CAAC,OAAO,EAAE,2CAA2C,EAAE+E,QAAQ,CAACF,QAAQ,CAAC;cACjFhE,YAAY,CAACkE,QAAQ,CAAC;YACxB,CAAC,MAAM;cACL;cACAvF,OAAO,CAACC,IAAI,CAAC,6DAA6D,CAAC;cAC3EoB,YAAY,CAAC;gBACXgE,QAAQ,EAAE,YAAY;gBACtBnE,QAAQ,EAAElC,aAAa,CAACiG,WAAW,CAAC,CAAC;gBACrCD,OAAO,EAAE,CAAC,CAAC;gBACXS,aAAa,EAAE,EAAE;gBACjBC,YAAY,EAAE,EAAE;gBAChBC,cAAc,EAAE;cAClB,CAAC,CAAC;YACJ;UACF,CAAC,MAAM;YACLtE,YAAY,CAACiE,SAAS,IAAI;cACxB;cACA;cACA,IAAI,CAAAA,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAED,QAAQ,MAAK,aAAa,IAAI,CAAAE,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEF,QAAQ,MAAK,YAAY,EAAE;gBAChF7E,QAAQ,CAAC,OAAO,EAAE,oDAAoD,CAAC;gBACvE,OAAO8E,SAAS;cAClB;cACA9E,QAAQ,CAAC,OAAO,EAAE,0BAA0B,EAAE8E,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAED,QAAQ,EAAE,KAAK,EAAEE,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEF,QAAQ,CAAC;cAC7F,OAAOE,QAAQ;YACjB,CAAC,CAAC;UACJ;QACF,CAAC,CAAC;;QAEF;QACAvG,aAAa,CAAC2F,EAAE,CAAC,OAAO,EAAE,CAAC;UAAEjE;QAAQ,CAAC,KAAK;UACzCF,QAAQ,CAAC,QAAQ,EAAE,wBAAwB,EAAEE,OAAO,CAAC;UACrDkB,QAAQ,CAAClB,OAAO,CAAC;QACnB,CAAC,CAAC;;QAEF;QACA1B,aAAa,CAAC2F,EAAE,CAAC,UAAU,EAAGhE,IAAI,IAAK;UACrCX,OAAO,CAACY,GAAG,CAAC,sBAAsB,EAAED,IAAI,CAAC;;UAEzC;UACAxB,gBAAgB,CAAC,CAAC;UAElBoC,aAAa,CAAC,IAAI,CAAC;UACnBE,eAAe,CAACd,IAAI,CAAC;QACvB,CAAC,CAAC;;QAEF;QACA3B,aAAa,CAAC2F,EAAE,CAAC,cAAc,EAAE,CAAC;UAAEiB,QAAQ;UAAEC,MAAM;UAAEzE;QAAU,CAAC,KAAK;UACpEpB,OAAO,CAACY,GAAG,CAAC,kBAAkBgF,QAAQ,EAAE,CAAC;UACzCvE,YAAY,CAACD,SAAS,CAAC;QACzB,CAAC,CAAC;;QAEF;QACApC,aAAa,CAAC2F,EAAE,CAAC,YAAY,EAAE,CAAC;UAAEiB,QAAQ;UAAExE;QAAU,CAAC,KAAK;UAC1DpB,OAAO,CAACY,GAAG,CAAC,gBAAgBgF,QAAQ,EAAE,CAAC;UACvCvE,YAAY,CAACD,SAAS,CAAC;QACzB,CAAC,CAAC;;QAEF;QACApC,aAAa,CAAC2F,EAAE,CAAC,cAAc,EAAE,CAAC;UAAEvD;QAAU,CAAC,KAAK;UAClDpB,OAAO,CAACY,GAAG,CAAC,sBAAsB,CAAC;UACnCS,YAAY,CAACD,SAAS,CAAC;QACzB,CAAC,CAAC;MACJ,CAAC,CAAC,OAAO0E,GAAG,EAAE;QACZ9F,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAE+F,GAAG,CAAC;QAClDhE,cAAc,CAAC,gCAAgCgE,GAAG,CAACpF,OAAO,EAAE,CAAC;QAC7DiB,eAAe,CAAC,KAAK,CAAC;QACtBK,eAAe,CAAC,OAAO,CAAC;MAC1B;IACF,CAAC;IAEDgB,gBAAgB,CAAC,CAAC;;IAElB;IACA,OAAO,MAAM;MACXhE,aAAa,CAAC+G,UAAU,CAAC,CAAC;IAC5B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAxH,SAAS,CAAC,MAAM;IACd;IACA,IAAI+D,qBAAqB,CAAC0D,OAAO,EAAE;MACjCC,aAAa,CAAC3D,qBAAqB,CAAC0D,OAAO,CAAC;MAC5C1D,qBAAqB,CAAC0D,OAAO,GAAG,IAAI;IACtC;;IAEA;IACA,IAAI5E,SAAS,IAAIA,SAAS,CAACiE,QAAQ,KAAK,SAAS,EAAE;MACjD;MACAhD,yBAAyB,CAAC6D,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG9G,iBAAiB,CAAC+G,MAAM,CAAC,CAAC;;MAE/E;MACA/D,qBAAqB,CAAC0D,OAAO,GAAGM,WAAW,CAAC,MAAM;QAChDjE,yBAAyB,CAACkE,SAAS,IACjC,CAACA,SAAS,GAAG,CAAC,IAAIjH,iBAAiB,CAAC+G,MACtC,CAAC;MACH,CAAC,EAAE9G,0BAA0B,CAAC;IAChC;;IAEA;IACA,OAAO,MAAM;MACX,IAAI+C,qBAAqB,CAAC0D,OAAO,EAAE;QACjCC,aAAa,CAAC3D,qBAAqB,CAAC0D,OAAO,CAAC;QAC5C1D,qBAAqB,CAAC0D,OAAO,GAAG,IAAI;MACtC;IACF,CAAC;EACH,CAAC,EAAE,CAAC5E,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEiE,QAAQ,CAAC,CAAC;;EAEzB;EACA9G,SAAS,CAAC,MAAM;IACd;IACA,IAAIwE,gBAAgB,CAACiD,OAAO,EAAE;MAC5BC,aAAa,CAAClD,gBAAgB,CAACiD,OAAO,CAAC;MACvCjD,gBAAgB,CAACiD,OAAO,GAAG,IAAI;IACjC;IAEA,IAAI5E,SAAS,IAAIA,SAAS,CAACiE,QAAQ,KAAK,SAAS,EAAE;MACjD;MACA7C,cAAc,CAAC,CAAC,CAAC;MACjBE,eAAe,CAAC,CAAC,CAAC;MAClBE,kBAAkB,CAAC,CAAC,CAAC;MACrBE,QAAQ,CAAC,CAAC,CAAC;;MAEX;MACAC,gBAAgB,CAACiD,OAAO,GAAGM,WAAW,CAAC,MAAM;QAC3C9D,cAAc,CAACgE,QAAQ,IAAIA,QAAQ,GAAG,EAAE,CAAC;MAC3C,CAAC,EAAE,EAAE,CAAC;MAENxG,OAAO,CAACY,GAAG,CAAC,eAAe,CAAC;IAC9B;;IAEA;IACA,OAAO,MAAM;MACX,IAAImC,gBAAgB,CAACiD,OAAO,EAAE;QAC5BC,aAAa,CAAClD,gBAAgB,CAACiD,OAAO,CAAC;QACvCjD,gBAAgB,CAACiD,OAAO,GAAG,IAAI;MACjC;IACF,CAAC;EACH,CAAC,EAAE,CAAC5E,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEiE,QAAQ,CAAC,CAAC;;EAEzB;EACA,MAAMoB,gBAAgB,GAAGhI,WAAW,CAAEuG,OAAO,IAAK;IAChD,IAAI,CAACA,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;;IAE7C;IACA,MAAM0B,aAAa,GAAGC,MAAM,CAACC,OAAO,CAAC5B,OAAO,CAAC;IAC7C,MAAM6B,eAAe,GAAG7H,aAAa,CAACiG,WAAW,CAAC,CAAC;;IAEnD;IACA,IAAI4B,eAAe,EAAE;MACnB,MAAMC,kBAAkB,GAAGJ,aAAa,CAACpD,IAAI,CAAC,CAAC,CAACH,EAAE,CAAC,KAAKA,EAAE,KAAK0D,eAAe,CAAC;MAC/E,IAAIC,kBAAkB,EAAE;QACtB,MAAM,GAAGC,aAAa,CAAC,GAAGD,kBAAkB;;QAE5C;QACA,IAAIC,aAAa,CAACC,KAAK,KAAKvE,YAAY,EAAE;UACxC,MAAMwE,WAAW,GAAGf,IAAI,CAACgB,GAAG,CAAC,CAAC,EAAEH,aAAa,CAACC,KAAK,GAAGvE,YAAY,CAAC;UACnE,IAAIwE,WAAW,GAAG,CAAC,EAAE;YACnBrE,kBAAkB,CAACqE,WAAW,CAAC;YAC/B;YACAvC,UAAU,CAAC,MAAM9B,kBAAkB,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;UAC/C;UACAF,eAAe,CAACqE,aAAa,CAACC,KAAK,CAAC;QACtC;;QAEA;QACA,IAAID,aAAa,CAAClE,KAAK,IAAIkE,aAAa,CAAClE,KAAK,KAAKA,KAAK,EAAE;UACxDC,QAAQ,CAACiE,aAAa,CAAClE,KAAK,CAAC;QAC/B;MACF;IACF;EACF,CAAC,EAAE,CAACJ,YAAY,EAAEI,KAAK,CAAC,CAAC;;EAEzB;EACAtE,SAAS,CAAC,MAAM;IACd,IAAI,CAAC2C,QAAQ,IAAI,CAACE,SAAS,EAAE;IAE7B,MAAM+F,aAAa,GAAI5C,CAAC,IAAK;MAC3B;MACA,IAAInD,SAAS,CAACiE,QAAQ,KAAK,SAAS,EAAE;QACpC,QAAQd,CAAC,CAAC6C,IAAI;UACZ,KAAK,WAAW;YACd;YACApI,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE;YAAW,CAAC,CAAC;YACxDzB,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE,UAAU;cAAE4G,SAAS,EAAE;YAAO,CAAC,CAAC;YAC3E;UACF,KAAK,YAAY;YACf;YACArI,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE;YAAY,CAAC,CAAC;YACzDzB,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE,UAAU;cAAE4G,SAAS,EAAE;YAAQ,CAAC,CAAC;YAC5E;UACF,KAAK,SAAS;UACd,KAAK,MAAM;YACTrI,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE;YAAS,CAAC,CAAC;YACtD;UACF,KAAK,WAAW;YACdzB,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE;YAAW,CAAC,CAAC;YACxD;UACF,KAAK,OAAO;YACV;YACA,IAAI,CAAC0B,iBAAiB,CAAC6D,OAAO,EAAE;cAC9BhH,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;gBAAEzD,IAAI,EAAE;cAAW,CAAC,CAAC;cACxD0B,iBAAiB,CAAC6D,OAAO,GAAG,IAAI;YAClC;YACA;UACF;YACE;QACJ;MACF,CAAC,MAAM,IAAI5E,SAAS,CAACiE,QAAQ,KAAK,aAAa,EAAE;QAC/C;QACA,IAAId,CAAC,CAAC6C,IAAI,KAAK,MAAM,EAAE;UACrB,MAAME,gBAAgB,GAAGlG,SAAS,CAACsE,YAAY,IAC7CtE,SAAS,CAACsE,YAAY,CAAC6B,QAAQ,CAACrG,QAAQ,CAAC;UAC3ClB,OAAO,CAACY,GAAG,CAAC,sCAAsC,EAAE,CAAC0G,gBAAgB,CAAC;UACtEtI,aAAa,CAACkF,IAAI,CAAC,OAAO,CAAC;QAC7B;MACF;IACF,CAAC;IAED,MAAMsD,WAAW,GAAIjD,CAAC,IAAK;MACzB;MACA,IAAInD,SAAS,CAACiE,QAAQ,KAAK,SAAS,EAAE;QACpC,QAAQd,CAAC,CAAC6C,IAAI;UACZ,KAAK,WAAW;UAChB,KAAK,YAAY;YACfpI,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE;YAAS,CAAC,CAAC;YACtD;UACF,KAAK,WAAW;YACdzB,aAAa,CAACkF,IAAI,CAAC,cAAc,EAAE;cAAEzD,IAAI,EAAE;YAAc,CAAC,CAAC;YAC3D;UACF,KAAK,OAAO;YACV;YACA0B,iBAAiB,CAAC6D,OAAO,GAAG,KAAK;YACjC;UACF;YACE;QACJ;MACF;IACF,CAAC;IAEDyB,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEP,aAAa,CAAC;IACjDM,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAEF,WAAW,CAAC;IAE7C,OAAO,MAAM;MACXC,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAER,aAAa,CAAC;MACpDM,MAAM,CAACE,mBAAmB,CAAC,OAAO,EAAEH,WAAW,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,CAACtG,QAAQ,EAAEE,SAAS,CAAC,CAAC;;EAEzB;EACA,MAAMwG,gBAAgB,GAAGnJ,WAAW,CAAEsG,UAAU,IAAK;IACnD/F,aAAa,CAACkF,IAAI,CAAC,YAAY,EAAEa,UAAU,CAAC;EAC9C,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM8C,cAAc,GAAGpJ,WAAW,CAAC,CAACqG,QAAQ,EAAEC,UAAU,KAAK;IAC3D/F,aAAa,CAACkF,IAAI,CAAC,UAAU,EAAE;MAAEY,QAAQ;MAAEC;IAAW,CAAC,CAAC;EAC1D,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM+C,eAAe,GAAGrJ,WAAW,CAAC,MAAM;IACxCO,aAAa,CAACkF,IAAI,CAAC,WAAW,CAAC;EACjC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM6D,iBAAiB,GAAGtJ,WAAW,CAAEuJ,OAAO,IAAK;IACjDhJ,aAAa,CAACkF,IAAI,CAAC,OAAO,CAAC,CAAC,CAAE;EAChC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM+D,eAAe,GAAGxJ,WAAW,CAAC,MAAM;IACxCO,aAAa,CAACkF,IAAI,CAAC,WAAW,CAAC;EACjC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMgE,iBAAiB,GAAGzJ,WAAW,CAAE0J,IAAI,IAAK;IAC9CnJ,aAAa,CAACkF,IAAI,CAAC,aAAa,EAAEiE,IAAI,CAAC;EACzC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,qBAAqB,GAAG3J,WAAW,CAAC,MAAM;IAC9C8C,aAAa,CAAC,KAAK,CAAC;IACpBE,eAAe,CAAC,IAAI,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM4G,uBAAuB,GAAGA,CAAA,KAAM;IACpC,IAAI,CAAC/I,iBAAiB,CAAC+G,MAAM,EAAE,OAAO,IAAI;IAC1C,OAAO,GAAGiC,OAAO,CAACC,GAAG,CAACC,UAAU,gBAAgBlJ,iBAAiB,CAAC8C,sBAAsB,CAAC,EAAE;EAC7F,CAAC;;EAED;EACA,IAAIV,YAAY,EAAE;IAChB,oBAAOrC,OAAA;MAAKoJ,SAAS,EAAC,KAAK;MAAAC,QAAA,eAACrJ,OAAA;QAAAqJ,QAAA,EAAI;MAAuB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACpE;EAEA,IAAIjH,WAAW,EAAE;IACf,oBACExC,OAAA;MAAKoJ,SAAS,EAAC,KAAK;MAAAC,QAAA,gBAClBrJ,OAAA;QAAAqJ,QAAA,EAAI;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACzBzJ,OAAA;QAAAqJ,QAAA,EAAI7G;MAAW;QAAA8G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpBzJ,OAAA;QAAAqJ,QAAA,EAAG;MAAyE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAChFzJ,OAAA;QACE0J,OAAO,EAAEA,CAAA,KAAMtB,MAAM,CAACuB,QAAQ,CAACC,MAAM,CAAC,CAAE;QACxCC,KAAK,EAAE;UACLC,OAAO,EAAE,WAAW;UACpBC,eAAe,EAAE,SAAS;UAC1BC,MAAM,EAAE,MAAM;UACdC,YAAY,EAAE,KAAK;UACnBC,KAAK,EAAE,OAAO;UACdC,MAAM,EAAE,SAAS;UACjBC,SAAS,EAAE;QACb,CAAE;QAAAf,QAAA,EACH;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;;EAEA;EACA,IAAI,CAAC1H,SAAS,EAAE;IACdpB,OAAO,CAACY,GAAG,CAAC,2CAA2C,CAAC;IACxD,oBAAOvB,OAAA;MAAKoJ,SAAS,EAAC,KAAK;MAAAC,QAAA,eAACrJ,OAAA;QAAAqJ,QAAA,EAAI;MAAyB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACtE;EACA9I,OAAO,CAACY,GAAG,CAAC,sBAAsB,EAAEQ,SAAS,CAAC;EAC9CpB,OAAO,CAACY,GAAG,CAAC,oBAAoB,EAAEQ,SAAS,CAACiE,QAAQ,CAAC;;EAErD;EACA,oBACEhG,OAAA;IACEoJ,SAAS,EAAC,KAAK;IACfS,KAAK,EAAE;MACL,IAAI9H,SAAS,CAACiE,QAAQ,KAAK,SAAS,IAAI;QACtCqE,eAAe,EAAE,OAAOrB,uBAAuB,CAAC,CAAC,GAAG;QACpDsB,cAAc,EAAE,OAAO;QACvBC,kBAAkB,EAAE,QAAQ;QAC5BC,UAAU,EAAE,iCAAiC;QAC7CC,SAAS,EAAE;MACb,CAAC;IACH,CAAE;IACFC,QAAQ,EAAC,GAAG;IAAArB,QAAA,gBAIhBrJ,OAAA;MACE6J,KAAK,EAAE;QACLc,QAAQ,EAAE,OAAO;QACjBC,GAAG,EAAE,MAAM;QACXC,KAAK,EAAE,MAAM;QACbC,UAAU,EAAE,iBAAiB;QAC7BZ,KAAK,EAAExH,YAAY,KAAK,WAAW,GAAG,SAAS,GACzCA,YAAY,KAAK,cAAc,GAAG,SAAS,GAC3C,SAAS;QACfoH,OAAO,EAAE,UAAU;QACnBG,YAAY,EAAE,KAAK;QACnBc,QAAQ,EAAE,MAAM;QAChBC,MAAM,EAAE,IAAI;QACZC,UAAU,EAAE,WAAW;QACvBC,OAAO,EAAE,MAAM;QACfC,aAAa,EAAE,QAAQ;QACvBC,cAAc,EAAE;MAClB,CAAE;MAAA/B,QAAA,gBAEFrJ,OAAA;QAAAqJ,QAAA,GAAM,UAAQ,EAACzG,eAAe,IAAI,MAAM;MAAA;QAAA0G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAChDzJ,OAAA;QAAM6J,KAAK,EAAE;UACXkB,QAAQ,EAAE,MAAM;UAChBX,SAAS,EAAE,KAAK;UAChBF,KAAK,EAAExH,YAAY,KAAK,cAAc,GAAG,SAAS,GAAG;QACvD,CAAE;QAAA2G,QAAA,GAAC,UACO,EAAC3G,YAAY,EACpBA,YAAY,KAAK,cAAc,IAAI,oBAAoB;MAAA;QAAA4G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EAGD/G,YAAY,KAAK,gBAAgB,iBAChC1C,OAAA;MAAK6J,KAAK,EAAE;QACVc,QAAQ,EAAE,OAAO;QACjBC,GAAG,EAAE,MAAM;QACXS,IAAI,EAAE,KAAK;QACXC,SAAS,EAAE,kBAAkB;QAC7BvB,eAAe,EAAE,uBAAuB;QACxCG,KAAK,EAAE,MAAM;QACbJ,OAAO,EAAE,WAAW;QACpBG,YAAY,EAAE,KAAK;QACnBsB,SAAS,EAAE,4BAA4B;QACvCP,MAAM,EAAE,IAAI;QACZE,OAAO,EAAE,MAAM;QACfM,UAAU,EAAE,QAAQ;QACpBhB,UAAU,EAAE,mBAAmB;QAC/BiB,OAAO,EAAE;MACX,CAAE;MAAApC,QAAA,gBACArJ,OAAA;QAAM6J,KAAK,EAAE;UAAE6B,WAAW,EAAE;QAAO,CAAE;QAAArC,QAAA,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,iDAEjD;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACN,EAEA1H,SAAS,CAACiE,QAAQ,KAAK,YAAY,iBAClChG,OAAA,CAACT,aAAa;MACZoM,YAAY,EAAEpD,gBAAiB;MAC/BqD,UAAU,EAAEpD,cAAe;MAC3B9H,KAAK,EAAEA;IAAM;MAAA4I,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CACF,EAEA1H,SAAS,CAACiE,QAAQ,KAAK,aAAa,iBACnChG,OAAA,CAACR,WAAW;MACViG,QAAQ,EAAE1D,SAAS,CAAC0D,QAAS;MAC7BE,OAAO,EAAE5D,SAAS,CAAC4D,OAAO,IAAI,CAAC,CAAE;MACjCkG,eAAe,EAAEhK,QAAS;MAC1BwE,YAAY,EAAEtE,SAAS,CAACsE,YAAY,IAAI,EAAG;MAC3CyF,OAAO,EAAEpD,iBAAkB;MAC3BqD,WAAW,EAAEnD,eAAgB;MAC7BoD,WAAW,EAAEvD,eAAgB;MAC7BwD,aAAa,EAAEpD,iBAAkB;MACjCqD,QAAQ,EAAEnK,SAAS,CAACmK,QAAS;MAC7B5F,cAAc,EAAEvE,SAAS,CAACuE,cAAe;MACzC6F,MAAM,GAAAxK,kBAAA,GAAEI,SAAS,CAAC4D,OAAO,cAAAhE,kBAAA,wBAAAC,qBAAA,GAAjBD,kBAAA,CAAoBE,QAAQ,CAAC,cAAAD,qBAAA,uBAA7BA,qBAAA,CAA+BuK;IAAO;MAAA7C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CACF,EAEA1H,SAAS,CAACiE,QAAQ,KAAK,SAAS,iBAC/BhG,OAAA;MAAK6J,KAAK,EAAE;QACVE,eAAe,EAAE,oBAAoB;QACrCqB,cAAc,EAAE,WAAW;QAC3BtB,OAAO,EAAE,MAAM;QACfG,YAAY,EAAE,MAAM;QACpBmC,MAAM,EAAE,WAAW;QACnBC,QAAQ,EAAE;MACZ,CAAE;MAAAhD,QAAA,gBACArJ,OAAA;QAAK6J,KAAK,EAAE;UACVqB,OAAO,EAAE,MAAM;UACfoB,cAAc,EAAE,eAAe;UAC/Bd,UAAU,EAAE,QAAQ;UACpBe,YAAY,EAAE;QAChB,CAAE;QAAAlD,QAAA,gBACArJ,OAAA;UAAI6J,KAAK,EAAE;YAAEuC,MAAM,EAAE,CAAC;YAAErB,QAAQ,EAAE,MAAM;YAAEb,KAAK,EAAE;UAAO,CAAE;UAAAb,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC9EzJ,OAAA;UAAK6J,KAAK,EAAE;YACVqB,OAAO,EAAE,MAAM;YACfM,UAAU,EAAE,QAAQ;YACpBgB,GAAG,EAAE;UACP,CAAE;UAAAnD,QAAA,gBACArJ,OAAA;YAAK6J,KAAK,EAAE;cACVkB,QAAQ,EAAE,MAAM;cAChBhB,eAAe,EAAE,MAAM;cACvBD,OAAO,EAAE,UAAU;cACnBG,YAAY,EAAE,KAAK;cACnBiB,OAAO,EAAE,MAAM;cACfC,aAAa,EAAE,QAAQ;cACvBK,UAAU,EAAE;YACd,CAAE;YAAAnC,QAAA,gBACArJ,OAAA;cAAM6J,KAAK,EAAE;gBAACkB,QAAQ,EAAE,MAAM;gBAAEb,KAAK,EAAE;cAAM,CAAE;cAAAb,QAAA,EAAC;YAAI;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC3DzJ,OAAA;cAAM6J,KAAK,EAAE;gBAAC4C,UAAU,EAAE;cAAM,CAAE;cAAApD,QAAA,EAAEtH,SAAS,CAAC0D;YAAQ;cAAA6D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC,eACNzJ,OAAA;YAAK6J,KAAK,EAAE;cACVkB,QAAQ,EAAE,MAAM;cAChBhB,eAAe,EAAE,MAAM;cACvBD,OAAO,EAAE,UAAU;cACnBG,YAAY,EAAE;YAChB,CAAE;YAAAZ,QAAA,GAAC,UACO,EAACxH,QAAQ,IAAIA,QAAQ,CAAC6K,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC;UAAA;YAAApD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENzJ,OAAA;QAAK6J,KAAK,EAAE;UAAEqB,OAAO,EAAE,MAAM;UAAEsB,GAAG,EAAE;QAAO,CAAE;QAAAnD,QAAA,gBAC3CrJ,OAAA;UAAK6J,KAAK,EAAE;YAAEqB,OAAO,EAAE,MAAM;YAAEC,aAAa,EAAE,QAAQ;YAAEK,UAAU,EAAE;UAAS,CAAE;UAAAnC,QAAA,eAC7ErJ,OAAA,CAACV,UAAU;YACTqN,KAAK,EAAE5K,SAAS,CAAC4K,KAAK,IAAI,EAAG;YAC7BhH,OAAO,EAAE5D,SAAS,CAAC4D,OAAO,IAAI,CAAC,CAAE;YACjCiH,YAAY,EAAE7K,SAAS,CAAC6K,YAAY,IAAI;UAAG;YAAAtD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENzJ,OAAA;UAAK6J,KAAK,EAAE;YACVqB,OAAO,EAAE,MAAM;YACfC,aAAa,EAAE,QAAQ;YACvB0B,QAAQ,EAAE;UACZ,CAAE;UAAAxD,QAAA,gBAEArJ,OAAA,CAACN,UAAU;YACTiI,KAAK,EAAEvE,YAAa;YACpBI,KAAK,EAAEA,KAAM;YACbF,eAAe,EAAEA,eAAgB;YACjCJ,WAAW,EAAEA;UAAY;YAAAoG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B,CAAC,eAGFzJ,OAAA;YAAK6J,KAAK,EAAE;cACVE,eAAe,EAAE,uBAAuB;cACxCD,OAAO,EAAE,MAAM;cACfG,YAAY,EAAE,KAAK;cACnBG,SAAS,EAAE;YACb,CAAE;YAAAf,QAAA,gBACArJ,OAAA;cAAI6J,KAAK,EAAE;gBAAEuC,MAAM,EAAE,YAAY;gBAAErB,QAAQ,EAAE,MAAM;gBAAEb,KAAK,EAAE;cAAO,CAAE;cAAAb,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAClFzJ,OAAA;cAAI6J,KAAK,EAAE;gBAAEiD,SAAS,EAAE,MAAM;gBAAEhD,OAAO,EAAE,CAAC;gBAAEsC,MAAM,EAAE;cAAE,CAAE;cAAA/C,QAAA,EACrD/B,MAAM,CAACC,OAAO,CAACxF,SAAS,CAAC4D,OAAO,IAAI,CAAC,CAAC,CAAC,CAACoH,GAAG,CAAC,CAAC,CAACjJ,EAAE,EAAE0C,MAAM,CAAC,KAAK;gBAC7D,MAAMwG,eAAe,GAAGlJ,EAAE,KAAKjC,QAAQ;gBACvC,MAAMoL,OAAO,GAAGnJ,EAAE,CAAC4I,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC;gBAElC,oBACE1M,OAAA;kBAEE6J,KAAK,EAAE;oBACLuC,MAAM,EAAE,OAAO;oBACftC,OAAO,EAAE,KAAK;oBACdC,eAAe,EAAEiD,eAAe,GAAG,MAAM,GAAG,MAAM;oBAClDE,UAAU,EAAE,aAAa1G,MAAM,CAAC0D,KAAK,IAAI,MAAM,EAAE;oBACjDD,YAAY,EAAE,KAAK;oBACnBO,UAAU,EAAE;kBACd,CAAE;kBAAAnB,QAAA,eAEFrJ,OAAA;oBAAK6J,KAAK,EAAE;sBACVqB,OAAO,EAAE,MAAM;sBACfM,UAAU,EAAE,QAAQ;sBACpBc,cAAc,EAAE;oBAClB,CAAE;oBAAAjD,QAAA,gBACArJ,OAAA;sBAAAqJ,QAAA,gBACErJ,OAAA;wBAAM6J,KAAK,EAAE;0BACX4C,UAAU,EAAEO,eAAe,GAAG,MAAM,GAAG,QAAQ;0BAC/C9C,KAAK,EAAE8C,eAAe,GAAG,MAAM,GAAG;wBACpC,CAAE;wBAAA3D,QAAA,EACC7C,MAAM,CAACX,IAAI,IAAI,UAAUW,MAAM,CAAC2G,YAAY,IAAIF,OAAO;sBAAE;wBAAA3D,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtD,CAAC,EACNuD,eAAe,iBAAIhN,OAAA;wBAAM6J,KAAK,EAAE;0BAC/BkB,QAAQ,EAAE,MAAM;0BAChBqC,UAAU,EAAE,KAAK;0BACjBlD,KAAK,EAAE;wBACT,CAAE;wBAAAb,QAAA,EAAC;sBAEH;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACJ,CAAC,eACNzJ,OAAA;sBAAK6J,KAAK,EAAE;wBACVE,eAAe,EAAE,MAAM;wBACvBD,OAAO,EAAE,SAAS;wBAClBG,YAAY,EAAE,KAAK;wBACnBc,QAAQ,EAAE,MAAM;wBAChB0B,UAAU,EAAE;sBACd,CAAE;sBAAApD,QAAA,EACC7C,MAAM,CAACmB,KAAK,IAAI;oBAAC;sBAAA2B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACf,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH;gBAAC,GAvCD3F,EAAE;kBAAAwF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAwCL,CAAC;cAET,CAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eAELzJ,OAAA;cAAK6J,KAAK,EAAE;gBACVO,SAAS,EAAE,MAAM;gBACjBN,OAAO,EAAE,KAAK;gBACdC,eAAe,EAAE,MAAM;gBACvBE,YAAY,EAAE,KAAK;gBACnBoD,SAAS,EAAE;cACb,CAAE;cAAAhE,QAAA,gBACArJ,OAAA;gBAAK6J,KAAK,EAAE;kBAAEkB,QAAQ,EAAE,MAAM;kBAAEb,KAAK,EAAE;gBAAO,CAAE;gBAAAb,QAAA,EAAC;cAAS;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAChEzJ,OAAA;gBAAK6J,KAAK,EAAE;kBAAEkB,QAAQ,EAAE,MAAM;kBAAE0B,UAAU,EAAE,MAAM;kBAAErC,SAAS,EAAE;gBAAM,CAAE;gBAAAf,QAAA,EACpEtH,SAAS,CAACmK,QAAQ,IAAI;cAAS;gBAAA5C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAGNzJ,OAAA;YAAK6J,KAAK,EAAE;cACVE,eAAe,EAAE,uBAAuB;cACxCD,OAAO,EAAE,MAAM;cACfG,YAAY,EAAE,KAAK;cACnBG,SAAS,EAAE,MAAM;cACjBW,QAAQ,EAAE,MAAM;cAChBb,KAAK,EAAE;YACT,CAAE;YAAAb,QAAA,gBACArJ,OAAA;cAAK6J,KAAK,EAAE;gBAAE0C,YAAY,EAAE,KAAK;gBAAEE,UAAU,EAAE,MAAM;gBAAEvC,KAAK,EAAE;cAAO,CAAE;cAAAb,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACvFzJ,OAAA;cAAAqJ,QAAA,EAAK;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrBzJ,OAAA;cAAAqJ,QAAA,EAAK;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACxBzJ,OAAA;cAAAqJ,QAAA,EAAK;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACzBzJ,OAAA;cAAAqJ,QAAA,EAAK;YAAiB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAEAxH,UAAU,IAAIE,YAAY,iBACzBnC,OAAA,CAACP,cAAc;MACb0C,YAAY,EAAEA,YAAa;MAC3B0J,eAAe,EAAEhK,QAAS;MAC1ByL,SAAS,EAAEvE;IAAsB;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC/H,EAAA,CAlyBQD,GAAG;AAAA8L,EAAA,GAAH9L,GAAG;AAoyBZ,eAAeA,GAAG;AAAC,IAAA8L,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}