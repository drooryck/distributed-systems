{"ast":null,"code":"var _jsxFileName = \"/Users/driesrooryck/Desktop/s25/distributed-systems/tetris/client/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport io from 'socket.io-client';\n\n// Load config and create socket connection\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst [socket, setSocket] = useState(null);\n\n// Connect to the WebSocket server using config\nuseEffect(() => {\n  const loadConfigAndConnect = async () => {\n    try {\n      // Fetch the config file from the server\n      const response = await fetch('/config.json');\n      if (!response.ok) {\n        throw new Error(`Failed to load config: ${response.status}`);\n      }\n      const config = await response.json();\n      console.log('Loaded config:', config);\n\n      // Connect to the server using the address from config\n      const newSocket = io(config.client.serverAddress);\n      setSocket(newSocket);\n\n      // Set up event listeners\n      newSocket.on('connect', () => {\n        console.log(`Connected to server at ${config.client.serverAddress}`);\n      });\n      newSocket.on('init', initialState => {\n        console.log('Received initial game state:', initialState);\n        setGameState(initialState);\n      });\n      newSocket.on('gameState', newState => {\n        var _gameState;\n        // If we're showing gameInProgress screen, only update if returning to lobby\n        if ((_gameState = gameState) !== null && _gameState !== void 0 && _gameState.gameInProgress && !gameState.players[newSocket.id] && newState.appPhase === 'playing') {\n          // Don't update state - keep showing \"Game in Progress\" screen\n          return;\n        }\n\n        // Otherwise update normally\n        setGameState(newState);\n      });\n      newSocket.on('gameOver', data => {\n        console.log('Game over with data:', data);\n        setIsGameOver(true);\n        setGameOverData(data);\n      });\n    } catch (error) {\n      console.error('Error loading config:', error);\n      // Fallback to localhost if config loading fails\n      const fallbackSocket = io('http://localhost:3001');\n      setSocket(fallbackSocket);\n\n      // Set up the same event listeners for the fallback socket\n      fallbackSocket.on('connect', () => {\n        console.log('Connected to server at http://localhost:3001 (fallback)');\n      });\n\n      // ... rest of the event listeners\n    }\n  };\n  loadConfigAndConnect();\n\n  // Cleanup function\n  return () => {\n    if (socket) {\n      socket.disconnect();\n    }\n  };\n}, []); // Empty dependency array - only run on mount\n\n// Map of tetromino values to colors\nconst COLORS = {\n  1: 'cyan',\n  // I\n  2: 'blue',\n  // J\n  3: 'orange',\n  // L\n  4: 'yellow',\n  // O\n  5: 'green',\n  // S\n  6: 'purple',\n  // T\n  7: 'red' // Z\n};\n\n// ----- GAME BOARD COMPONENT -----\nconst GameBoard = ({\n  board,\n  players,\n  currentPlayerId\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const cellSize = 30; // each cell is 30px\n\n  // Calculate canvas dimensions based on board size\n  const canvasWidth = board[0] ? board[0].length * cellSize : 300;\n  const canvasHeight = board.length * cellSize || 600;\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n\n    // Clear the canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw a dark background\n    ctx.fillStyle = '#111';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Draw the grid\n    ctx.strokeStyle = '#333';\n    ctx.lineWidth = 0.5;\n\n    // Draw grid lines\n    for (let r = 0; r <= board.length; r++) {\n      ctx.beginPath();\n      ctx.moveTo(0, r * cellSize);\n      ctx.lineTo(canvas.width, r * cellSize);\n      ctx.stroke();\n    }\n    for (let c = 0; c <= board[0].length; c++) {\n      ctx.beginPath();\n      ctx.moveTo(c * cellSize, 0);\n      ctx.lineTo(c * cellSize, canvas.height);\n      ctx.stroke();\n    }\n\n    // Draw placed pieces on the board\n    for (let r = 0; r < board.length; r++) {\n      for (let c = 0; c < board[r].length; c++) {\n        const cell = board[r][c];\n        if (cell !== 0) {\n          // If the cell has a complex structure (from server)\n          if (typeof cell === 'object') {\n            const playerId = cell.playerId;\n            const player = Object.values(players).find(p => p.id === playerId.substring(0, 4));\n            ctx.fillStyle = player ? player.color : 'gray';\n          } else {\n            // If it's just a number (simple case)\n            ctx.fillStyle = COLORS[cell] || 'gray';\n          }\n          ctx.fillRect(c * cellSize, r * cellSize, cellSize, cellSize);\n          ctx.strokeStyle = '#FFF';\n          ctx.lineWidth = 1;\n          ctx.strokeRect(c * cellSize, r * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    // Draw active tetromino for each player\n    Object.values(players).forEach(player => {\n      const {\n        x,\n        y,\n        currentPiece,\n        color\n      } = player;\n      if (!currentPiece) return;\n      const shape = currentPiece.shape;\n      for (let r = 0; r < shape.length; r++) {\n        for (let c = 0; c < shape[r].length; c++) {\n          if (shape[r][c] !== 0) {\n            const boardX = x + c;\n            const boardY = y + r;\n\n            // Skip if out of bounds or above the board\n            if (boardX < 0 || boardX >= board[0].length || boardY < 0 || boardY >= board.length) {\n              continue;\n            }\n            ctx.fillStyle = color || currentPiece.color || 'gray';\n            ctx.fillRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n            ctx.strokeStyle = '#FFF';\n            ctx.lineWidth = 1;\n            ctx.strokeRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n          }\n        }\n      }\n    });\n  }, [board, players, currentPlayerId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: canvasWidth,\n      height: canvasHeight,\n      style: {\n        border: '2px solid #555'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- PLAYER LIST COMPONENT -----\n_s(GameBoard, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n_c = GameBoard;\nconst PlayerList = ({\n  players,\n  currentPlayerId\n}) => {\n  const currentPlayerShortId = currentPlayerId === null || currentPlayerId === void 0 ? void 0 : currentPlayerId.substring(0, 4);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginBottom: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '10px'\n      },\n      children: \"Players\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '10px',\n        maxWidth: '250px'\n      },\n      children: Object.values(players).map(player => {\n        const isCurrentPlayer = player.id === currentPlayerShortId;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            padding: '8px',\n            backgroundColor: '#333',\n            borderRadius: '4px',\n            borderLeft: `4px solid ${player.color}`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '15px',\n              height: '15px',\n              backgroundColor: player.color,\n              marginRight: '10px',\n              borderRadius: '3px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [\"Player \", player.playerNumber, isCurrentPlayer && ' (You)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: 'auto',\n              fontWeight: 'bold',\n              fontSize: '14px',\n              color: '#AAA'\n            },\n            children: player.score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)]\n        }, player.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- SCOREBOARD COMPONENT -----\n_c2 = PlayerList;\nconst ScoreBoard = ({\n  players\n}) => {\n  // Sort players by score in descending order\n  const sortedPlayers = [...Object.values(players)].sort((a, b) => b.score - a.score);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '10px'\n      },\n      children: \"Scores\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#222',\n        padding: '10px',\n        borderRadius: '4px',\n        maxWidth: '250px'\n      },\n      children: sortedPlayers.map(player => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          padding: '5px 0',\n          borderBottom: '1px solid #444'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '10px',\n              height: '10px',\n              backgroundColor: player.color,\n              marginRight: '8px',\n              borderRadius: '2px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Player \", player.playerNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: player.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this)]\n      }, player.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- HOME SCREEN COMPONENT -----\n_c3 = ScoreBoard;\nconst HomeScreen = ({\n  players,\n  currentPlayerId,\n  readyPlayers,\n  onReady,\n  onStartGame,\n  onSetGameMode,\n  gameMode,\n  gameInProgress,\n  isRejoining\n}) => {\n  const currentPlayerShortId = currentPlayerId ? currentPlayerId.substring(0, 4) : null;\n  const currentPlayer = currentPlayerShortId ? Object.values(players).find(p => p.id === currentPlayerShortId) : null;\n  const isPlayerOne = currentPlayer && currentPlayer.playerNumber === 1;\n  const gameModes = [{\n    id: 'classic',\n    name: 'Classic Mode',\n    disabled: false\n  }, {\n    id: 'battle',\n    name: 'Battle Mode',\n    disabled: true\n  }, {\n    id: 'cooperative',\n    name: 'Co-op Mode',\n    disabled: true\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center',\n      maxWidth: '800px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Tetristributed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this), gameInProgress && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#552233',\n        padding: '10px',\n        borderRadius: '5px',\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game In Progress\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"A game is currently in progress. Please wait for it to finish.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom: '40px',\n        flexWrap: 'wrap',\n        gap: '20px'\n      },\n      children: [1, 2, 3, 4].map(num => {\n        const player = Object.values(players).find(p => p.playerNumber === num);\n        const isReady = player && readyPlayers.some(id => players[id] && players[id].id === player.id);\n        const isCurrentPlayer = player && currentPlayerShortId && player.id === currentPlayerShortId;\n        const isPlayerRejoining = isCurrentPlayer && player.isRejoining;\n        const bgColor = !player ? '#222' : '#444';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '150px',\n            height: '100px',\n            border: '2px solid #555',\n            borderRadius: '8px',\n            padding: '10px',\n            backgroundColor: bgColor,\n            position: 'relative',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 'bold',\n              marginBottom: '5px'\n            },\n            children: [\"Player \", num, isCurrentPlayer && ' (You)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [player && isReady && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '20px',\n                height: '20px',\n                backgroundColor: player.color,\n                margin: '0 auto'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this), isPlayerRejoining && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: '0',\n                left: '0',\n                right: '0',\n                padding: '2px',\n                backgroundColor: '#33AA33',\n                color: 'white',\n                fontSize: '12px',\n                borderTopLeftRadius: '6px',\n                borderTopRightRadius: '6px'\n              },\n              children: \"Welcome Back!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 19\n            }, this), !player && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Waiting for player...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 29\n            }, this), player && !isReady && !isCurrentPlayer && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                color: '#888'\n              },\n              children: \"Not Ready\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this), isCurrentPlayer && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 'auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onReady(!isReady),\n              style: {\n                backgroundColor: isReady ? '#333' : '#FF3333',\n                border: 'none',\n                color: 'white',\n                padding: '5px 10px',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                width: '100%'\n              },\n              children: isReady ? 'Cancel' : isPlayerRejoining ? 'Rejoin Game' : 'Press X'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 17\n          }, this)]\n        }, num, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), isPlayerOne && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          gap: '15px'\n        },\n        children: gameModes.map(mode => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => !mode.disabled && onSetGameMode(mode.id),\n          style: {\n            padding: '10px 15px',\n            backgroundColor: gameMode === mode.id ? '#FF5733' : '#444',\n            border: 'none',\n            borderRadius: '4px',\n            color: 'white',\n            opacity: mode.disabled ? 0.5 : 1,\n            cursor: mode.disabled ? 'not-allowed' : 'pointer'\n          },\n          disabled: mode.disabled,\n          children: [mode.name, mode.disabled && ' (Coming Soon)']\n        }, mode.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 9\n    }, this), isPlayerOne && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onStartGame,\n      style: {\n        padding: '12px 30px',\n        backgroundColor: readyPlayers.length > 0 ? '#33FF57' : '#555',\n        border: 'none',\n        borderRadius: '4px',\n        color: 'white',\n        fontSize: '18px',\n        cursor: readyPlayers.length > 0 ? 'pointer' : 'not-allowed'\n      },\n      disabled: readyPlayers.length === 0,\n      children: \"Start Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }, this), !isPlayerOne && readyPlayers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        fontSize: '18px'\n      },\n      children: \"Waiting for Player 1 to start the game...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Controls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2190 \\u2192 : Move left/right | \\u2191 or Z : Rotate | \\u2193 : Soft drop | Space : Hard drop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 323,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- GAME OVER SCREEN COMPONENT -----\n_c4 = HomeScreen;\nconst GameOverScreen = ({\n  gameOverData,\n  onTimeout\n}) => {\n  _s2();\n  const [countdown, setCountdown] = useState(5);\n  useEffect(() => {\n    // Start countdown\n    const timer = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          onTimeout();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [onTimeout]);\n\n  // Format the player ID to be more readable\n  const playerShortId = gameOverData.playerId ? gameOverData.playerId.substring(0, 4) : 'Unknown';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      zIndex: 1000\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#333',\n        padding: '30px',\n        borderRadius: '10px',\n        boxShadow: '0 0 20px rgba(255, 0, 0, 0.5)',\n        textAlign: 'center',\n        color: 'white',\n        maxWidth: '400px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: '0 0 20px',\n          fontSize: '28px',\n          color: '#FF5733'\n        },\n        children: \"Game Over\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '18px',\n          marginBottom: '15px'\n        },\n        children: [\"Player \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold',\n            color: '#FF5733'\n          },\n          children: playerShortId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 18\n        }, this), \" lost!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '24px',\n          margin: '20px 0'\n        },\n        children: [\"Final Score: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: gameOverData.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '16px',\n          marginTop: '25px',\n          color: '#AAA'\n        },\n        children: [\"Returning to lobby in \", countdown, \" seconds...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 509,\n    columnNumber: 5\n  }, this);\n};\n\n// ----- MAIN APP COMPONENT -----\n_s2(GameOverScreen, \"5IyNxS0sv4AHO/4kY6tmyq4YYJY=\");\n_c5 = GameOverScreen;\nfunction App() {\n  _s3();\n  var _gameState$players$so;\n  const [gameState, setGameState] = useState(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [gameOverData, setGameOverData] = useState(null);\n\n  // Handle socket events\n  useEffect(() => {\n    socket.on('connect', () => {\n      console.log('Connected to server');\n    });\n    socket.on('init', initialState => {\n      console.log('Received initial game state:', initialState);\n      setGameState(initialState);\n    });\n    socket.on('gameState', newState => {\n      // If we're showing gameInProgress screen, only update if returning to lobby\n      if (gameState !== null && gameState !== void 0 && gameState.gameInProgress && !gameState.players[socket.id] && newState.appPhase === 'playing') {\n        // Don't update state - keep showing \"Game in Progress\" screen\n        return;\n      }\n\n      // Otherwise update normally\n      setGameState(newState);\n    });\n    socket.on('gameOver', data => {\n      console.log('Game over with data:', data);\n      setIsGameOver(true);\n      setGameOverData(data);\n    });\n    return () => {\n      socket.off('connect');\n      socket.off('init');\n      socket.off('gameState');\n      socket.off('gameOver');\n    };\n  }, []);\n\n  // Keyboard control handlers\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', {\n              type: 'moveLeft'\n            });\n            socket.emit('playerAction', {\n              type: 'startDAS',\n              direction: 'left'\n            });\n            break;\n          case 'ArrowRight':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', {\n              type: 'moveRight'\n            });\n            socket.emit('playerAction', {\n              type: 'startDAS',\n              direction: 'right'\n            });\n            break;\n          case 'ArrowUp':\n          case 'KeyZ':\n            socket.emit('playerAction', {\n              type: 'rotate'\n            });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', {\n              type: 'softDrop'\n            });\n            break;\n          case 'Space':\n            socket.emit('playerAction', {\n              type: 'hardDrop'\n            });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    const handleKeyUp = e => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            socket.emit('playerAction', {\n              type: 'endDAS'\n            });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', {\n              type: 'endSoftDrop'\n            });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [gameState]);\n\n  // Handle player ready state\n  const handlePlayerReady = useCallback(isReady => {\n    socket.emit('playerReady', isReady);\n  }, []);\n\n  // Handle game start\n  const handleStartGame = useCallback(() => {\n    socket.emit('startGame');\n  }, []);\n\n  // Handle game mode change\n  const handleSetGameMode = useCallback(mode => {\n    socket.emit('setGameMode', mode);\n  }, []);\n\n  // Handle game over timeout\n  const handleGameOverTimeout = useCallback(() => {\n    setIsGameOver(false);\n    setGameOverData(null);\n  }, []);\n\n  // Show loading screen if no game state\n  if (!gameState) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Connecting to server...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Home screen or game screen based on app phase\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [gameState.appPhase === 'homescreen' && /*#__PURE__*/_jsxDEV(HomeScreen, {\n      players: gameState.players,\n      currentPlayerId: socket.id,\n      readyPlayers: gameState.readyPlayers,\n      onReady: handlePlayerReady,\n      onStartGame: handleStartGame,\n      onSetGameMode: handleSetGameMode,\n      gameMode: gameState.gameMode,\n      gameInProgress: gameState.gameInProgress,\n      isRejoining: (_gameState$players$so = gameState.players[socket.id]) === null || _gameState$players$so === void 0 ? void 0 : _gameState$players$so.isRejoining\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 9\n    }, this), gameState.appPhase === 'playing' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Tetristributed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 694,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Connected as player: \", socket.id && socket.id.substring(0, 4)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '20px',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(GameBoard, {\n          board: gameState.board,\n          players: gameState.players,\n          currentPlayerId: socket.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(PlayerList, {\n            players: gameState.players,\n            currentPlayerId: socket.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ScoreBoard, {\n            players: gameState.players\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), isGameOver && gameOverData && /*#__PURE__*/_jsxDEV(GameOverScreen, {\n      gameOverData: gameOverData,\n      onTimeout: handleGameOverTimeout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 677,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"F+J5CdKKlfklcgEskksfjnnHQqc=\");\n_c6 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"GameBoard\");\n$RefreshReg$(_c2, \"PlayerList\");\n$RefreshReg$(_c3, \"ScoreBoard\");\n$RefreshReg$(_c4, \"HomeScreen\");\n$RefreshReg$(_c5, \"GameOverScreen\");\n$RefreshReg$(_c6, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","io","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","setSocket","loadConfigAndConnect","response","fetch","ok","Error","status","config","json","console","log","newSocket","client","serverAddress","on","initialState","setGameState","newState","_gameState","gameState","gameInProgress","players","id","appPhase","data","setIsGameOver","setGameOverData","error","fallbackSocket","disconnect","COLORS","GameBoard","board","currentPlayerId","_s","canvasRef","cellSize","canvasWidth","length","canvasHeight","canvas","current","ctx","getContext","clearRect","width","height","fillStyle","fillRect","strokeStyle","lineWidth","r","beginPath","moveTo","lineTo","stroke","c","cell","playerId","player","Object","values","find","p","substring","color","strokeRect","forEach","x","y","currentPiece","shape","boardX","boardY","children","ref","style","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","PlayerList","currentPlayerShortId","marginBottom","display","flexDirection","gap","maxWidth","map","isCurrentPlayer","alignItems","padding","backgroundColor","borderRadius","borderLeft","marginRight","flex","playerNumber","marginLeft","fontWeight","fontSize","score","_c2","ScoreBoard","sortedPlayers","sort","a","b","justifyContent","borderBottom","_c3","HomeScreen","readyPlayers","onReady","onStartGame","onSetGameMode","gameMode","isRejoining","currentPlayer","isPlayerOne","gameModes","name","disabled","textAlign","margin","flexWrap","num","isReady","some","isPlayerRejoining","bgColor","position","top","left","right","borderTopLeftRadius","borderTopRightRadius","marginTop","onClick","cursor","mode","opacity","_c4","GameOverScreen","gameOverData","onTimeout","_s2","countdown","setCountdown","timer","setInterval","prev","clearInterval","playerShortId","bottom","zIndex","boxShadow","_c5","App","_s3","_gameState$players$so","isGameOver","off","handleKeyDown","e","code","emit","type","direction","handleKeyUp","window","addEventListener","removeEventListener","handlePlayerReady","handleStartGame","handleSetGameMode","handleGameOverTimeout","className","_c6","$RefreshReg$"],"sources":["/Users/driesrooryck/Desktop/s25/distributed-systems/tetris/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport io from 'socket.io-client';\n\n// Load config and create socket connection\nconst [socket, setSocket] = useState(null);\n\n// Connect to the WebSocket server using config\nuseEffect(() => {\n  const loadConfigAndConnect = async () => {\n    try {\n      // Fetch the config file from the server\n      const response = await fetch('/config.json');\n      if (!response.ok) {\n        throw new Error(`Failed to load config: ${response.status}`);\n      }\n      \n      const config = await response.json();\n      console.log('Loaded config:', config);\n      \n      // Connect to the server using the address from config\n      const newSocket = io(config.client.serverAddress);\n      setSocket(newSocket);\n      \n      // Set up event listeners\n      newSocket.on('connect', () => {\n        console.log(`Connected to server at ${config.client.serverAddress}`);\n      });\n      \n      newSocket.on('init', (initialState) => {\n        console.log('Received initial game state:', initialState);\n        setGameState(initialState);\n      });\n      \n      newSocket.on('gameState', (newState) => {\n        // If we're showing gameInProgress screen, only update if returning to lobby\n        if (gameState?.gameInProgress && !gameState.players[newSocket.id] && \n            newState.appPhase === 'playing') {\n          // Don't update state - keep showing \"Game in Progress\" screen\n          return;\n        }\n        \n        // Otherwise update normally\n        setGameState(newState);\n      });\n      \n      newSocket.on('gameOver', (data) => {\n        console.log('Game over with data:', data);\n        setIsGameOver(true);\n        setGameOverData(data);\n      });\n    } catch (error) {\n      console.error('Error loading config:', error);\n      // Fallback to localhost if config loading fails\n      const fallbackSocket = io('http://localhost:3001');\n      setSocket(fallbackSocket);\n      \n      // Set up the same event listeners for the fallback socket\n      fallbackSocket.on('connect', () => {\n        console.log('Connected to server at http://localhost:3001 (fallback)');\n      });\n      \n      // ... rest of the event listeners\n    }\n  };\n  \n  loadConfigAndConnect();\n  \n  // Cleanup function\n  return () => {\n    if (socket) {\n      socket.disconnect();\n    }\n  };\n}, []);  // Empty dependency array - only run on mount\n\n// Map of tetromino values to colors\nconst COLORS = {\n  1: 'cyan',    // I\n  2: 'blue',    // J\n  3: 'orange',  // L\n  4: 'yellow',  // O\n  5: 'green',   // S\n  6: 'purple',  // T\n  7: 'red'      // Z\n};\n\n// ----- GAME BOARD COMPONENT -----\nconst GameBoard = ({ board, players, currentPlayerId }) => {\n  const canvasRef = useRef(null);\n  const cellSize = 30; // each cell is 30px\n  \n  // Calculate canvas dimensions based on board size\n  const canvasWidth = board[0] ? board[0].length * cellSize : 300;\n  const canvasHeight = board.length * cellSize || 600;\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const ctx = canvas.getContext('2d');\n    \n    // Clear the canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n    // Draw a dark background\n    ctx.fillStyle = '#111';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    \n    // Draw the grid\n    ctx.strokeStyle = '#333';\n    ctx.lineWidth = 0.5;\n    \n    // Draw grid lines\n    for (let r = 0; r <= board.length; r++) {\n      ctx.beginPath();\n      ctx.moveTo(0, r * cellSize);\n      ctx.lineTo(canvas.width, r * cellSize);\n      ctx.stroke();\n    }\n    \n    for (let c = 0; c <= board[0].length; c++) {\n      ctx.beginPath();\n      ctx.moveTo(c * cellSize, 0);\n      ctx.lineTo(c * cellSize, canvas.height);\n      ctx.stroke();\n    }\n    \n    // Draw placed pieces on the board\n    for (let r = 0; r < board.length; r++) {\n      for (let c = 0; c < board[r].length; c++) {\n        const cell = board[r][c];\n        if (cell !== 0) {\n          // If the cell has a complex structure (from server)\n          if (typeof cell === 'object') {\n            const playerId = cell.playerId;\n            const player = Object.values(players).find(p => p.id === playerId.substring(0, 4));\n            ctx.fillStyle = player ? player.color : 'gray';\n          } else {\n            // If it's just a number (simple case)\n            ctx.fillStyle = COLORS[cell] || 'gray';\n          }\n          \n          ctx.fillRect(c * cellSize, r * cellSize, cellSize, cellSize);\n          ctx.strokeStyle = '#FFF';\n          ctx.lineWidth = 1;\n          ctx.strokeRect(c * cellSize, r * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n      \n    // Draw active tetromino for each player\n    Object.values(players).forEach(player => {\n      const { x, y, currentPiece, color } = player;\n      \n      if (!currentPiece) return;\n      \n      const shape = currentPiece.shape;\n      \n      for (let r = 0; r < shape.length; r++) {\n        for (let c = 0; c < shape[r].length; c++) {\n          if (shape[r][c] !== 0) {\n            const boardX = x + c;\n            const boardY = y + r;\n            \n            // Skip if out of bounds or above the board\n            if (boardX < 0 || boardX >= board[0].length || \n                boardY < 0 || boardY >= board.length) {\n              continue;\n            }\n            \n            ctx.fillStyle = color || currentPiece.color || 'gray';\n            ctx.fillRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n            ctx.strokeStyle = '#FFF';\n            ctx.lineWidth = 1;\n            ctx.strokeRect(boardX * cellSize, boardY * cellSize, cellSize, cellSize);\n          }\n        }\n      }\n    });\n    \n  }, [board, players, currentPlayerId]);\n\n  return (\n    <div>\n      <canvas\n        ref={canvasRef}\n        width={canvasWidth}\n        height={canvasHeight}\n        style={{ border: '2px solid #555' }}\n      />\n    </div>\n  );\n};\n\n// ----- PLAYER LIST COMPONENT -----\nconst PlayerList = ({ players, currentPlayerId }) => {\n  const currentPlayerShortId = currentPlayerId?.substring(0, 4);\n  \n  return (\n    <div style={{ marginBottom: '20px' }}>\n      <h3 style={{ marginBottom: '10px' }}>Players</h3>\n      \n      <div style={{ \n        display: 'flex', \n        flexDirection: 'column',\n        gap: '10px',\n        maxWidth: '250px'\n      }}>\n        {Object.values(players).map(player => {\n          const isCurrentPlayer = player.id === currentPlayerShortId;\n          \n          return (\n            <div \n              key={player.id}\n              style={{ \n                display: 'flex',\n                alignItems: 'center',\n                padding: '8px',\n                backgroundColor: '#333',\n                borderRadius: '4px',\n                borderLeft: `4px solid ${player.color}`,\n              }}\n            >\n              <div \n                style={{ \n                  width: '15px', \n                  height: '15px', \n                  backgroundColor: player.color,\n                  marginRight: '10px',\n                  borderRadius: '3px'\n                }}\n              />\n              \n              <div style={{ flex: 1 }}>\n                Player {player.playerNumber}\n                {isCurrentPlayer && ' (You)'}\n              </div>\n              \n              <div style={{ \n                marginLeft: 'auto', \n                fontWeight: 'bold', \n                fontSize: '14px',\n                color: '#AAA'\n              }}>\n                {player.score}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n// ----- SCOREBOARD COMPONENT -----\nconst ScoreBoard = ({ players }) => {\n  // Sort players by score in descending order\n  const sortedPlayers = [...Object.values(players)].sort((a, b) => b.score - a.score);\n  \n  return (\n    <div>\n      <h3 style={{ marginBottom: '10px' }}>Scores</h3>\n      \n      <div style={{\n        backgroundColor: '#222',\n        padding: '10px',\n        borderRadius: '4px',\n        maxWidth: '250px'\n      }}>\n        {sortedPlayers.map(player => (\n          <div \n            key={player.id}\n            style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              padding: '5px 0',\n              borderBottom: '1px solid #444'\n            }}\n          >\n            <div style={{ display: 'flex', alignItems: 'center' }}>\n              <div \n                style={{ \n                  width: '10px', \n                  height: '10px', \n                  backgroundColor: player.color,\n                  marginRight: '8px',\n                  borderRadius: '2px'\n                }}\n              />\n              <span>Player {player.playerNumber}</span>\n            </div>\n            <div style={{ fontWeight: 'bold' }}>{player.score}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// ----- HOME SCREEN COMPONENT -----\nconst HomeScreen = ({ \n  players, \n  currentPlayerId, \n  readyPlayers, \n  onReady, \n  onStartGame, \n  onSetGameMode, \n  gameMode,\n  gameInProgress,\n  isRejoining\n}) => {\n  const currentPlayerShortId = currentPlayerId ? currentPlayerId.substring(0, 4) : null;\n  const currentPlayer = currentPlayerShortId ? Object.values(players).find(p => p.id === currentPlayerShortId) : null;\n  const isPlayerOne = currentPlayer && currentPlayer.playerNumber === 1;\n  \n  const gameModes = [\n    { id: 'classic', name: 'Classic Mode', disabled: false },\n    { id: 'battle', name: 'Battle Mode', disabled: true },\n    { id: 'cooperative', name: 'Co-op Mode', disabled: true }\n  ];\n  \n  return (\n    <div style={{ textAlign: 'center', maxWidth: '800px', margin: '0 auto' }}>\n      <h1>Tetristributed</h1>\n      \n      {gameInProgress && (\n        <div style={{\n          backgroundColor: '#552233',\n          padding: '10px',\n          borderRadius: '5px',\n          marginBottom: '20px'\n        }}>\n          <h2>Game In Progress</h2>\n          <p>A game is currently in progress. Please wait for it to finish.</p>\n        </div>\n      )}\n      \n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        marginBottom: '40px',\n        flexWrap: 'wrap',\n        gap: '20px'\n      }}>\n        {[1, 2, 3, 4].map(num => {\n          const player = Object.values(players).find(p => p.playerNumber === num);\n          const isReady = player && readyPlayers.some(id => players[id] && players[id].id === player.id);\n          const isCurrentPlayer = player && currentPlayerShortId && player.id === currentPlayerShortId;\n          const isPlayerRejoining = isCurrentPlayer && player.isRejoining;\n          const bgColor = !player ? '#222' : '#444';\n          \n          return (\n            <div key={num} style={{\n              width: '150px',\n              height: '100px',\n              border: '2px solid #555',\n              borderRadius: '8px',\n              padding: '10px',\n              backgroundColor: bgColor,\n              position: 'relative',\n              display: 'flex',\n              flexDirection: 'column'\n            }}>\n              <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\n                Player {num}\n                {isCurrentPlayer && ' (You)'}\n              </div>\n              \n              <div style={{ flex: 1 }}>\n                {player && isReady && (\n                  <div style={{\n                    width: '20px',\n                    height: '20px',\n                    backgroundColor: player.color,\n                    margin: '0 auto'\n                  }}></div>\n                )}\n                \n                {isPlayerRejoining && (\n                  <div style={{\n                    position: 'absolute',\n                    top: '0',\n                    left: '0',\n                    right: '0',\n                    padding: '2px',\n                    backgroundColor: '#33AA33',\n                    color: 'white',\n                    fontSize: '12px',\n                    borderTopLeftRadius: '6px',\n                    borderTopRightRadius: '6px'\n                  }}>\n                    Welcome Back!\n                  </div>\n                )}\n                \n                {!player && <div>Waiting for player...</div>}\n                \n                {player && !isReady && !isCurrentPlayer && (\n                  <div style={{ fontSize: '14px', color: '#888' }}>Not Ready</div>\n                )}\n              </div>\n              \n              {isCurrentPlayer && (\n                <div style={{ marginTop: 'auto' }}>\n                  <button \n                    onClick={() => onReady(!isReady)}\n                    style={{\n                      backgroundColor: isReady ? '#333' : '#FF3333',\n                      border: 'none',\n                      color: 'white',\n                      padding: '5px 10px',\n                      borderRadius: '4px',\n                      cursor: 'pointer',\n                      width: '100%'\n                    }}\n                  >\n                    {isReady ? 'Cancel' : isPlayerRejoining ? 'Rejoin Game' : 'Press X'}\n                  </button>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n      \n      {isPlayerOne && (\n        <div style={{ marginBottom: '30px' }}>\n          <h2>Game Mode</h2>\n          <div style={{ display: 'flex', justifyContent: 'center', gap: '15px' }}>\n            {gameModes.map(mode => (\n              <button\n                key={mode.id}\n                onClick={() => !mode.disabled && onSetGameMode(mode.id)}\n                style={{\n                  padding: '10px 15px',\n                  backgroundColor: gameMode === mode.id ? '#FF5733' : '#444',\n                  border: 'none',\n                  borderRadius: '4px',\n                  color: 'white',\n                  opacity: mode.disabled ? 0.5 : 1,\n                  cursor: mode.disabled ? 'not-allowed' : 'pointer'\n                }}\n                disabled={mode.disabled}\n              >\n                {mode.name}\n                {mode.disabled && ' (Coming Soon)'}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n      \n      {isPlayerOne && (\n        <button\n          onClick={onStartGame}\n          style={{\n            padding: '12px 30px',\n            backgroundColor: readyPlayers.length > 0 ? '#33FF57' : '#555',\n            border: 'none',\n            borderRadius: '4px',\n            color: 'white',\n            fontSize: '18px',\n            cursor: readyPlayers.length > 0 ? 'pointer' : 'not-allowed'\n          }}\n          disabled={readyPlayers.length === 0}\n        >\n          Start Game\n        </button>\n      )}\n      \n      {!isPlayerOne && readyPlayers.length > 0 && (\n        <div style={{ marginTop: '20px', fontSize: '18px' }}>\n          Waiting for Player 1 to start the game...\n        </div>\n      )}\n      \n      <div style={{ marginTop: '40px' }}>\n        <h3>Controls</h3>\n        <p>  : Move left/right |  or Z : Rotate |  : Soft drop | Space : Hard drop</p>\n      </div>\n    </div>\n  );\n};\n\n// ----- GAME OVER SCREEN COMPONENT -----\nconst GameOverScreen = ({ gameOverData, onTimeout }) => {\n  const [countdown, setCountdown] = useState(5);\n  \n  useEffect(() => {\n    // Start countdown\n    const timer = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          onTimeout();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    \n    return () => clearInterval(timer);\n  }, [onTimeout]);\n  \n  // Format the player ID to be more readable\n  const playerShortId = gameOverData.playerId ? gameOverData.playerId.substring(0, 4) : 'Unknown';\n  \n  return (\n    <div style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      zIndex: 1000\n    }}>\n      <div style={{\n        backgroundColor: '#333',\n        padding: '30px',\n        borderRadius: '10px',\n        boxShadow: '0 0 20px rgba(255, 0, 0, 0.5)',\n        textAlign: 'center',\n        color: 'white',\n        maxWidth: '400px'\n      }}>\n        <h2 style={{ margin: '0 0 20px', fontSize: '28px', color: '#FF5733' }}>Game Over</h2>\n        \n        <div style={{ fontSize: '18px', marginBottom: '15px' }}>\n          Player <span style={{ fontWeight: 'bold', color: '#FF5733' }}>{playerShortId}</span> lost!\n        </div>\n        \n        <div style={{ fontSize: '24px', margin: '20px 0' }}>\n          Final Score: <span style={{ fontWeight: 'bold' }}>{gameOverData.score}</span>\n        </div>\n        \n        <div style={{ fontSize: '16px', marginTop: '25px', color: '#AAA' }}>\n          Returning to lobby in {countdown} seconds...\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// ----- MAIN APP COMPONENT -----\nfunction App() {\n  const [gameState, setGameState] = useState(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [gameOverData, setGameOverData] = useState(null);\n  \n  // Handle socket events\n  useEffect(() => {\n    socket.on('connect', () => {\n      console.log('Connected to server');\n    });\n\n    socket.on('init', (initialState) => {\n      console.log('Received initial game state:', initialState);\n      setGameState(initialState);\n    });\n\n    socket.on('gameState', (newState) => {\n      // If we're showing gameInProgress screen, only update if returning to lobby\n      if (gameState?.gameInProgress && !gameState.players[socket.id] && \n          newState.appPhase === 'playing') {\n        // Don't update state - keep showing \"Game in Progress\" screen\n        return;\n      }\n      \n      // Otherwise update normally\n      setGameState(newState);\n    });\n\n    socket.on('gameOver', (data) => {\n      console.log('Game over with data:', data);\n      setIsGameOver(true);\n      setGameOverData(data);\n    });\n\n    return () => {\n      socket.off('connect');\n      socket.off('init');\n      socket.off('gameState');\n      socket.off('gameOver');\n    };\n  }, []);\n\n  // Keyboard control handlers\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', { type: 'moveLeft' });\n            socket.emit('playerAction', { type: 'startDAS', direction: 'left' });\n            break;\n          case 'ArrowRight':\n            // First send immediate move, then start DAS\n            socket.emit('playerAction', { type: 'moveRight' });\n            socket.emit('playerAction', { type: 'startDAS', direction: 'right' });\n            break;\n          case 'ArrowUp':\n          case 'KeyZ':\n            socket.emit('playerAction', { type: 'rotate' });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', { type: 'softDrop' });\n            break;\n          case 'Space':\n            socket.emit('playerAction', { type: 'hardDrop' });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    const handleKeyUp = (e) => {\n      // Only process key events if game is in progress\n      if (gameState && gameState.appPhase === 'playing') {\n        switch (e.code) {\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            socket.emit('playerAction', { type: 'endDAS' });\n            break;\n          case 'ArrowDown':\n            socket.emit('playerAction', { type: 'endSoftDrop' });\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [gameState]);\n\n  // Handle player ready state\n  const handlePlayerReady = useCallback((isReady) => {\n    socket.emit('playerReady', isReady);\n  }, []);\n\n  // Handle game start\n  const handleStartGame = useCallback(() => {\n    socket.emit('startGame');\n  }, []);\n\n  // Handle game mode change\n  const handleSetGameMode = useCallback((mode) => {\n    socket.emit('setGameMode', mode);\n  }, []);\n\n  // Handle game over timeout\n  const handleGameOverTimeout = useCallback(() => {\n    setIsGameOver(false);\n    setGameOverData(null);\n  }, []);\n\n  // Show loading screen if no game state\n  if (!gameState) {\n    return <div className=\"App\"><h1>Connecting to server...</h1></div>;\n  }\n\n  // Home screen or game screen based on app phase\n  return (\n    <div className=\"App\">\n      {gameState.appPhase === 'homescreen' && (\n        <HomeScreen\n          players={gameState.players}\n          currentPlayerId={socket.id}\n          readyPlayers={gameState.readyPlayers}\n          onReady={handlePlayerReady}\n          onStartGame={handleStartGame}\n          onSetGameMode={handleSetGameMode}\n          gameMode={gameState.gameMode}\n          gameInProgress={gameState.gameInProgress}\n          isRejoining={gameState.players[socket.id]?.isRejoining}\n        />\n      )}\n      \n      {gameState.appPhase === 'playing' && (\n        <>\n          <h1>Tetristributed</h1>\n          <p>Connected as player: {socket.id && socket.id.substring(0, 4)}</p>\n          <div style={{ display: 'flex', gap: '20px', marginBottom: '20px' }}>\n            <GameBoard \n              board={gameState.board} \n              players={gameState.players}\n              currentPlayerId={socket.id}\n            />\n            <div>\n              <PlayerList players={gameState.players} currentPlayerId={socket.id} />\n              <ScoreBoard players={gameState.players} />\n            </div>\n          </div>\n        </>\n      )}\n      \n      {isGameOver && gameOverData && (\n        <GameOverScreen \n          gameOverData={gameOverData} \n          onTimeout={handleGameOverTimeout} \n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}